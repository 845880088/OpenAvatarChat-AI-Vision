# OpenAvatarChat äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

âœ… ä½ å·²ç»è¿æ¥åˆ°é˜¿é‡Œäº‘ECSæœåŠ¡å™¨  
âœ… æœåŠ¡å™¨ç³»ç»Ÿï¼šCentOS/RHELï¼ˆæœ‰dnfå‘½ä»¤ï¼‰  
âœ… å½“å‰ç”¨æˆ·ï¼šadmin  

---

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šç³»ç»Ÿæ›´æ–°å’Œå®‰è£…åŸºç¡€å·¥å…·

### 1.1 æ›´æ–°ç³»ç»Ÿï¼ˆå»ºè®®å…ˆåšï¼‰
```bash
# æ›´æ–°å®‰å…¨è¡¥ä¸
sudo dnf upgrade-minimal --security -y

# å®Œæ•´ç³»ç»Ÿæ›´æ–°ï¼ˆå¯é€‰ï¼Œæ¯”è¾ƒæ…¢ï¼‰
sudo dnf update -y
```

### 1.2 å®‰è£…å¿…è¦å·¥å…·
```bash
# å®‰è£…åŸºç¡€å¼€å‘å·¥å…·
sudo dnf groupinstall "Development Tools" -y

# å®‰è£…é¡¹ç›®éœ€è¦çš„è½¯ä»¶
sudo dnf install -y git python3 python3-pip nodejs npm wget curl
```

### 1.3 éªŒè¯å®‰è£…
```bash
# æ£€æŸ¥ç‰ˆæœ¬ï¼Œç¡®è®¤å®‰è£…æˆåŠŸ
python3 --version
git --version
node --version
```

---

## ğŸ“¥ ç¬¬äºŒæ­¥ï¼šä¸‹è½½é¡¹ç›®ä»£ç 

### 2.1 å…‹éš†é¡¹ç›®
```bash
# å›åˆ°å®¶ç›®å½•
cd ~

# å…‹éš†é¡¹ç›®ï¼ˆæ›¿æ¢ä¸ºä½ çš„å®é™…é¡¹ç›®åœ°å€ï¼‰
git clone https://github.com/your-username/OpenAvatarChat.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd OpenAvatarChat
```

### 2.2 æŸ¥çœ‹é¡¹ç›®ç»“æ„
```bash
# åˆ—å‡ºé¡¹ç›®æ–‡ä»¶
ls -la

# æ£€æŸ¥é‡è¦æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls scripts/setup_coturn.sh
ls config/
```

---

## ğŸ”§ ç¬¬ä¸‰æ­¥ï¼šæ­å»ºTURNæœåŠ¡å™¨

### 3.1 è¿è¡Œè‡ªåŠ¨å®‰è£…è„šæœ¬
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/setup_coturn.sh

# è¿è¡Œå®‰è£…è„šæœ¬ï¼ˆéœ€è¦sudoæƒé™ï¼‰
sudo scripts/setup_coturn.sh
```

**è„šæœ¬ä¼šè‡ªåŠ¨ï¼š**
- âœ… å®‰è£…coturnè½¯ä»¶
- âœ… æ£€æµ‹ä½ çš„å…¬ç½‘IP
- âœ… ç”Ÿæˆé…ç½®æ–‡ä»¶
- âœ… å¯åŠ¨TURNæœåŠ¡

### 3.2 æ£€æŸ¥TURNæœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥coturnæœåŠ¡æ˜¯å¦è¿è¡Œ
sudo systemctl status coturn

# æ£€æŸ¥ç«¯å£æ˜¯å¦å¼€æ”¾
sudo netstat -tulpn | grep 3478
```

---

## ğŸ”¥ ç¬¬å››æ­¥ï¼šé…ç½®é˜²ç«å¢™

### 4.1 å¼€æ”¾å¿…è¦ç«¯å£
```bash
# å¼€æ”¾OpenAvatarChatä¸»æœåŠ¡ç«¯å£
sudo firewall-cmd --zone=public --add-port=8282/tcp --permanent

# å¼€æ”¾TURNæœåŠ¡å™¨ç«¯å£
sudo firewall-cmd --zone=public --add-port=3478/tcp --permanent
sudo firewall-cmd --zone=public --add-port=3478/udp --permanent
sudo firewall-cmd --zone=public --add-port=5349/tcp --permanent
sudo firewall-cmd --zone=public --add-port=5349/udp --permanent

# å¼€æ”¾TURNåª’ä½“ç«¯å£èŒƒå›´
sudo firewall-cmd --zone=public --add-port=49152-65535/udp --permanent

# é‡æ–°åŠ è½½é˜²ç«å¢™é…ç½®
sudo firewall-cmd --reload
```

### 4.2 éªŒè¯é˜²ç«å¢™é…ç½®
```bash
# æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£
sudo firewall-cmd --zone=public --list-ports
```

---

## âš™ï¸ ç¬¬äº”æ­¥ï¼šé…ç½®é¡¹ç›®ä½¿ç”¨è‡ªå»ºTURN

**æš‚åœï¼å…ˆå®Œæˆå‰é¢çš„æ­¥éª¤ï¼Œç„¶åå‘Šè¯‰æˆ‘ï¼š**

1. âœ… ç³»ç»Ÿæ›´æ–°å®Œæˆäº†å—ï¼Ÿ
2. âœ… é¡¹ç›®ä»£ç ä¸‹è½½æˆåŠŸäº†å—ï¼Ÿ  
3. âœ… TURNæœåŠ¡å™¨å®‰è£…æˆåŠŸäº†å—ï¼Ÿ
4. âœ… é˜²ç«å¢™é…ç½®å®Œæˆäº†å—ï¼Ÿ

**å®Œæˆè¿™äº›æ­¥éª¤åï¼Œæˆ‘ä¼šç»§ç»­æŒ‡å¯¼é¡¹ç›®é…ç½®éƒ¨åˆ†ã€‚**

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### å¦‚æœé‡åˆ°æƒé™é—®é¢˜
```bash
# åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
sudo su -

# æˆ–è€…ç»™adminç”¨æˆ·æ·»åŠ sudoæƒé™
sudo usermod -aG wheel admin
```

### å¦‚æœç½‘ç»œä¸‹è½½æ…¢
```bash
# é…ç½®å›½å†…é•œåƒæºï¼ˆå¯é€‰ï¼‰
sudo dnf config-manager --add-repo http://mirrors.aliyun.com/repo/Centos-8.repo
```

æœåŠ¡å™¨è´¦å· root
å¯†ç  Jie2270931
