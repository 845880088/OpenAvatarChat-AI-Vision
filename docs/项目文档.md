# OpenAvatarChat å®Œæ•´é¡¹ç›®æ–‡æ¡£

<p align="center">
<strong>æ¨¡å—åŒ–çš„äº¤äº’æ•°å­—äººå¯¹è¯å®ç°ç³»ç»Ÿ</strong><br>
<strong>å¼€å‘è€…ï¼šå»–ä¼Ÿæ°</strong>
</p>

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è§ˆ](#é¡¹ç›®æ¦‚è§ˆ)
- [æ ¸å¿ƒäº®ç‚¹](#æ ¸å¿ƒäº®ç‚¹)
- [æŠ€æœ¯æ¶æ„æ·±åº¦è§£æ](#æŠ€æœ¯æ¶æ„æ·±åº¦è§£æ)
  - [æ‘„åƒå¤´è§†é¢‘å¯¹è¯å®ç°åŸç†](#æ‘„åƒå¤´è§†é¢‘å¯¹è¯å®ç°åŸç†)
  - [Handleræ’ä»¶æ¶æ„](#handleræ’ä»¶æ¶æ„)
  - [WebRTCå®æ—¶é€šä¿¡](#webrtcå®æ—¶é€šä¿¡)
- [é¡¹ç›®ç»“æ„è¯¦è§£](#é¡¹ç›®ç»“æ„è¯¦è§£)
- [å¿«é€Ÿå¯åŠ¨æŒ‡å—](#å¿«é€Ÿå¯åŠ¨æŒ‡å—)
- [é…ç½®æ–‡ä»¶ä½“ç³»](#é…ç½®æ–‡ä»¶ä½“ç³»)
- [Handleræ¨¡å—è¯¦è§£](#handleræ¨¡å—è¯¦è§£)
- [éƒ¨ç½²æ–¹æ¡ˆ](#éƒ¨ç½²æ–¹æ¡ˆ)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [åº”ç”¨åœºæ™¯](#åº”ç”¨åœºæ™¯)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## é¡¹ç›®æ¦‚è§ˆ

### åŸºæœ¬ä¿¡æ¯

OpenAvatarChat æ˜¯ä¸€ä¸ªåŸºäºå¤šæ¨¡æ€AIçš„å®æ—¶æ•°å­—äººå¯¹è¯ç³»ç»Ÿï¼Œ**æ ¸å¿ƒåˆ›æ–°åœ¨äºå°†æ‘„åƒå¤´è§†é¢‘æµå®æ—¶ä¼ è¾“ç»™å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œè§†è§‰ç†è§£ï¼Œå®ç°"çœ‹å¾—è§ã€å¬å¾—åˆ°ã€èƒ½ç†è§£"çš„æ™ºèƒ½äº¤äº’**ã€‚

- **é¡¹ç›®åç§°**: OpenAvatarChat
- **ç‰ˆæœ¬**: v0.6.0+
- **å¼€å‘å›¢é˜Ÿ**: HumanAIGC-Engineering Team
- **å¼€å‘è€…**: å»–ä¼Ÿæ°
- **å¼€æºåè®®**: Apache License 2.0
- **æŠ€æœ¯ç‰¹ç‚¹**: æ¨¡å—åŒ–æ¶æ„ + WebRTCå®æ—¶é€šä¿¡ + å¤šæ¨¡æ€AI + 3D/2Dæ•°å­—äººæ¸²æŸ“

### é¡¹ç›®å®šä½

**é«˜åº¦æ¨¡å—åŒ–ã€æ˜“äºå®šåˆ¶çš„æ•°å­—äººå¯¹è¯å¹³å°**ï¼Œé€šè¿‡çµæ´»ç»„åˆä¸åŒçš„ç®—æ³•ç»„ä»¶ï¼ˆASRã€LLMã€TTSã€Avatarï¼‰ï¼Œæ»¡è¶³ä»ä¸ªäººå¼€å‘è€…åˆ°ä¼ä¸šçº§åº”ç”¨çš„å¤šæ ·åŒ–éœ€æ±‚ã€‚

### æ ¸å¿ƒåˆ›æ–°

1. **ğŸ†• å®æ—¶è§†è§‰ç†è§£**ï¼šå°†å®æ—¶è§†é¢‘æµä¸LLMç»“åˆï¼Œå®ç°"çœ‹å›¾è¯´è¯"
2. **ğŸ†• æ¨¡å—åŒ–Handleræ¶æ„**ï¼šæ’ä»¶å¼å¤„ç†å™¨ï¼Œæ˜“æ‰©å±•æ˜“ç»´æŠ¤
3. **ğŸ†• å¤šæ–¹æ¡ˆæ•°å­—äººæ¸²æŸ“**ï¼šæ”¯æŒ3D LAMã€2D LiteAvatarã€2D MuseTalk
4. **ğŸ†• å±å¹•å…±äº«ä¸AIåˆ†æ**ï¼šå®æ—¶å±å¹•å†…å®¹ç†è§£
5. **ğŸ†• AIè‡ªåŠ¨åŒ–åŠ©æ‰‹**ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€æ§åˆ¶è®¡ç®—æœºæ“ä½œ

---

## æ ¸å¿ƒäº®ç‚¹

### âœ¨ ä¸»è¦ç‰¹æ€§

- **å¤šæ¨¡æ€è¯­è¨€æ¨¡å‹**ï¼šæ”¯æŒæ–‡æœ¬ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å¤šç§è¾“å…¥æ¨¡æ€
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šçµæ´»æ›¿æ¢ç»„ä»¶ï¼Œå®ç°ä¸åŒåŠŸèƒ½ç»„åˆ
- **AIè‡ªåŠ¨åŒ–åŠ©æ‰‹**ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€æ§åˆ¶è®¡ç®—æœºï¼ŒAIå¯"çœ‹åˆ°"å±å¹•å†…å®¹å¹¶æ™ºèƒ½æ‰§è¡Œæ“ä½œ
- **å±å¹•å…±äº«åŠŸèƒ½**ï¼šæ”¯æŒå®æ—¶å±å¹•å…±äº«å’ŒAIåˆ†æï¼Œå¯ç†è§£å±å¹•å†…å®¹å¹¶è¿›è¡Œæ™ºèƒ½äº¤äº’
- **TURNæœåŠ¡å™¨é›†æˆ**ï¼šå®Œå–„çš„NATç©¿é€æ”¯æŒï¼Œç¡®ä¿è·¨ç½‘ç»œç¯å¢ƒç¨³å®šè¿æ¥
- **ç°ä»£åŒ–å‰ç«¯**ï¼šVue3+TypeScriptæ„å»ºçš„å“åº”å¼ç•Œé¢ï¼Œæ”¯æŒå¤šè®¾å¤‡è®¿é—®

### ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **ç«¯åˆ°ç«¯å»¶è¿Ÿ** | ~2.2ç§’ | ç”¨æˆ·è¯´è¯ç»“æŸåˆ°æ•°å­—äººå¼€å§‹å“åº”ï¼ˆæµ‹è¯•ç¯å¢ƒï¼ši9-13900KF + RTX 4090ï¼‰ |
| **è§†é¢‘å¸§ç‡** | 30fps | WebRTCæ•è·å¸§ç‡ |
| **æ•°å­—äººå¸§ç‡** | 25-30fps | LiteAvatar GPUæ¨¡å¼ / 20fps MuseTalk |
| **å¹¶å‘æ”¯æŒ** | 5è·¯+ | LAM 3Då®¢æˆ·ç«¯æ¸²æŸ“ / 2-3è·¯ LiteAvatar |

### ğŸ¯ ç³»ç»Ÿéœ€æ±‚

**æœåŠ¡ç«¯é…ç½®**:
- **æ“ä½œç³»ç»Ÿ**: Linux / Windows
- **Python**: 3.11.7 ~ 3.11.11ï¼ˆæ ¸å¿ƒçº¦æŸï¼‰
- **CUDA**: 12.4+ï¼ˆNVIDIAé©±åŠ¨æ”¯æŒçš„CUDAç‰ˆæœ¬ï¼‰
- **CPU**: 4æ ¸å¿ƒä»¥ä¸Šï¼ˆi7ä»¥ä¸Šæ¨èï¼‰
- **å†…å­˜**: 8GBä»¥ä¸Š
- **GPUæ˜¾å­˜**: æ ¹æ®é…ç½®
  - LAM 3D: 2GBï¼ˆæä½ï¼‰
  - LiteAvatar 2D: 3GB/è·¯
  - MuseTalk 2D: 4GB/è·¯
  - MiniCPM-oå®Œæ•´ç‰ˆ: 20GB+ / INT4é‡åŒ–ç‰ˆ: <10GB

**å®¢æˆ·ç«¯è¦æ±‚**:
- **æµè§ˆå™¨**: æ”¯æŒWebRTCï¼ˆChrome/Firefox/Safariï¼‰
- **è®¾å¤‡**: å¸¦æ‘„åƒå¤´çš„è®¾å¤‡
- **ç½‘ç»œ**: 1Mbpsä»¥ä¸Šç¨³å®šè¿æ¥

---

## æŠ€æœ¯æ¶æ„æ·±åº¦è§£æ

### æ•´ä½“ç³»ç»Ÿæ¶æ„

```
ç”¨æˆ·ä¾§                    æœåŠ¡ç«¯                       AIå¤„ç†å±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æµè§ˆå™¨å‰ç«¯  â”‚ WebRTC   â”‚ RTC Client  â”‚              â”‚   Handler   â”‚
â”‚ Vue3+WebGL  â”‚ â—„â”€â”€â”€â”€â”€â”€â–º â”‚   Handler   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   ç³»ç»Ÿ      â”‚
â”‚             â”‚          â”‚             â”‚              â”‚             â”‚
â”‚ ğŸ“·æ‘„åƒå¤´     â”‚          â”‚ ğŸ“¡æ•°æ®è·¯ç”±   â”‚              â”‚ ğŸ§  VAD      â”‚
â”‚ ğŸ¤éº¦å…‹é£     â”‚          â”‚ ğŸ¬è§†é¢‘å¤„ç†   â”‚              â”‚ ğŸ§ ASR      â”‚  
â”‚ ğŸ”Šæ‰¬å£°å™¨     â”‚          â”‚ ğŸ”„çŠ¶æ€ç®¡ç†   â”‚              â”‚ ğŸ¤– LLM      â”‚
â”‚ ğŸ­æ•°å­—äºº     â”‚          â”‚             â”‚              â”‚ ğŸ”Š TTS      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ ğŸ­ Avatar   â”‚
                                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‘„åƒå¤´è§†é¢‘å¯¹è¯å®ç°åŸç†

#### æ ¸å¿ƒé—®é¢˜ï¼šæ‘„åƒå¤´è§†é¢‘æ˜¯å¦‚ä½•ä¼ ç»™å¤§æ¨¡å‹çš„ï¼Ÿ

**ç­”æ¡ˆï¼šæ˜¯çš„ï¼Œé€šè¿‡å›¾ç‰‡å¸§ä¼ ç»™å¤§æ¨¡å‹ï¼**

OpenAvatarChaté‡‡ç”¨**è§†é¢‘å¸§é‡‡æ · + å¤šæ¨¡æ€LLM**çš„æŠ€æœ¯æ–¹æ¡ˆï¼š

```
æŠ€æœ¯è·¯çº¿: æ‘„åƒå¤´ â†’ WebRTC â†’ å›¾åƒå¸§ â†’ Base64 â†’ å¤šæ¨¡æ€LLM â†’ æ™ºèƒ½å“åº”
```

#### å®ç°æµç¨‹è¯¦è§£

**1. WebRTCè§†é¢‘æ•è·**

```python
# ä½ç½®: src/handlers/client/rtc_client/client_handler_rtc.py
def put_data(self, modality: EngineChannelType, data: Union[np.ndarray, str]):
    if modality == EngineChannelType.VIDEO:
        # æ·»åŠ batchç»´åº¦
        data_bundle.set_main_data(data[np.newaxis, ...])
        
        # åˆ›å»ºæ‘„åƒå¤´è§†é¢‘æ•°æ®
        chat_data = ChatData(
            source="client",
            type=ChatDataType.CAMERA_VIDEO,  # æ ‡è®°ä¸ºæ‘„åƒå¤´è§†é¢‘æ•°æ®
            data=data_bundle,
            timestamp=timestamp,
        )
        
        # æäº¤åˆ°å¤„ç†æµæ°´çº¿
        self.data_subter.sub(chat_data)
```

**2. å¤šæ¨¡æ€LLMå¤„ç†**

```python
# ä½ç½®: src/handlers/llm/openai_compatible/llm_handler_openai_compatible.py
def handle(self, context: HandlerContext, inputs: ChatData, output_definitions):
    # æ¥æ”¶è§†é¢‘è¾“å…¥
    if inputs.type == ChatDataType.CAMERA_VIDEO and context.enable_video_input:
        context.current_image = inputs.data.get_main_data()  # å­˜å‚¨å½“å‰å›¾åƒå¸§
        return  # ä»…å­˜å‚¨ï¼Œç­‰å¾…æ–‡æœ¬è¾“å…¥è§¦å‘æ¨ç†
    
    # ç»“åˆå›¾åƒå’Œæ–‡æœ¬è¿›è¡Œæ¨ç†
    elif inputs.type == ChatDataType.HUMAN_TEXT:
        text = inputs.data.get_main_data()
        current_content = context.history.generate_next_messages(
            chat_text, 
            [context.current_image] if context.current_image is not None else []
        )
```

**3. å›¾åƒBase64ç¼–ç **

```python
# ä½ç½®: src/engine_utils/media_utils.py
class ImageUtils:
    @staticmethod
    def numpy2base64(video_frame, format="JPEG"):
        """å°†NumPyæ•°ç»„è½¬æ¢ä¸ºBase64ç¼–ç çš„æ•°æ®URL"""
        
        # RGB â†’ BGR é¢œè‰²é€šé“è½¬æ¢
        image = PIL.Image.fromarray(np.squeeze(video_frame)[..., ::-1])
        
        # åˆ›å»ºå†…å­˜ç¼“å†²åŒº
        buffered = BytesIO()
        
        # JPEGå‹ç¼©ä¿å­˜åˆ°å†…å­˜
        image.save(buffered, format=format)
        
        # Base64ç¼–ç 
        base64_image = base64.b64encode(buffered.getvalue()).decode("utf-8")
        
        # ç”Ÿæˆå®Œæ•´çš„æ•°æ®URL
        data_url = f"data:image/{format.lower()};base64,{base64_image}"
        return data_url
```

**4. å¤šæ¨¡æ€æ¶ˆæ¯æ„å»º**

```python
# ä½ç½®: src/handlers/llm/openai_compatible/chat_history_manager.py
def generate_next_messages(self, chat_text, images):
    if images and len(images) > 0:
        return {
            "role": "user",
            "content": [
                {"type": "text", "text": filter_text(chat_text)},
                # å›¾åƒè½¬æ¢ä¸ºBase64æ•°æ®URL
                *[{"type": "image_url", 
                   "image_url": {"url": ImageUtils.format_image(img)}} 
                  for img in images]
            ]
        }
```

**5. OpenAIå…¼å®¹APIè°ƒç”¨**

```python
completion = context.client.chat.completions.create(
    model="qwen3-vl-plus",  # æ”¯æŒè§†è§‰ç†è§£çš„æ¨¡å‹
    messages=[
        {"role": "system", "content": "ä½ æ˜¯AIåŠ©æ‰‹..."},
        {
            "role": "user", 
            "content": [
                {"type": "text", "text": "ç”¨æˆ·çš„è¯­éŸ³è¯†åˆ«æ–‡æœ¬"},
                {
                    "type": "image_url", 
                    "image_url": {
                        "url": "data:image/jpeg;base64,/9j/4AAQ..."
                    }
                }
            ]
        }
    ],
    stream=True
)
```

#### è§†é¢‘å¤„ç†é…ç½®

```yaml
# config/glut-VL.yaml - è§†è§‰ç†è§£é…ç½®
LLM_Bailian:
  model_name: "qwen3-vl-plus"          # å¤šæ¨¡æ€æ¨¡å‹
  enable_video_input: True             # å¯ç”¨è§†é¢‘è¾“å…¥
  system_prompt: "ä½ æ˜¯AIåŠ©æ‰‹ï¼Œèƒ½ç†è§£å›¾åƒ..." 
  api_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
```

#### å®æ—¶æ€§èƒ½ä¼˜åŒ–

1. **è§†é¢‘å¸§é‡‡æ ·**: 30fps â†’ å¯é…ç½®é‡‡æ ·ç‡
2. **å›¾åƒå‹ç¼©**: JPEGè´¨é‡90%ï¼Œå¹³è¡¡è´¨é‡å’Œä¼ è¾“
3. **ç¼“å­˜ç­–ç•¥**: ä»…ä¿å­˜æœ€æ–°å¸§ï¼Œé¿å…å†…å­˜å †ç§¯
4. **å¼‚æ­¥å¤„ç†**: è§†é¢‘å¤„ç†ä¸é˜»å¡éŸ³é¢‘æµ

### Handleræ’ä»¶æ¶æ„

#### Handlerå¤„ç†æµæ°´çº¿

```
ğŸ“¹ CAMERA_VIDEO â†’ ğŸ§  LLM Handler (è§†è§‰ç†è§£)
ğŸ¤ MIC_AUDIO â†’ ğŸ‘‚ VAD â†’ ğŸ§ ASR â†’ ğŸ§  LLM â†’ ğŸ”Š TTS â†’ ğŸ­ Avatar
ğŸ’¬ HUMAN_TEXT â†’ ğŸ§  LLM Handler (æ–‡æœ¬ç†è§£)
```

#### Handlerç±»å‹åˆ†ç±»

| Handlerç±»å‹ | ä½œç”¨ | å…³é”®ç‰¹æ€§ |
|-------------|------|----------|
| **Client Handler** | ç”¨æˆ·ç•Œé¢å’Œé€šä¿¡ | WebRTCæµä¼ è¾“ã€ä¼šè¯ç®¡ç† |
| **VAD Handler** | è¯­éŸ³æ´»åŠ¨æ£€æµ‹ | å®æ—¶æ£€æµ‹è¯­éŸ³èµ·æ­¢ |
| **ASR Handler** | è¯­éŸ³è¯†åˆ« | Speech to Textè½¬æ¢ |
| **LLM Handler** | å¤§è¯­è¨€æ¨¡å‹ | å¤šæ¨¡æ€ç†è§£ã€å¯¹è¯ç”Ÿæˆ |
| **TTS Handler** | è¯­éŸ³åˆæˆ | Text to Speechè½¬æ¢ |
| **Avatar Handler** | æ•°å­—äººæ¸²æŸ“ | 2D/3Dæ•°å­—äººè§†é¢‘ç”Ÿæˆ |

#### HandleråŸºç±»æ¶æ„

```python
# ä½ç½®: src/chat_engine/common/handler_base.py
class HandlerBase:
    def initialize(self, config):
        """åˆå§‹åŒ–Handlerï¼ˆåŠ è½½æ¨¡å‹ç­‰ï¼‰"""
        pass
    
    def create_context(self, session_context):
        """ä¸ºæ¯ä¸ªä¼šè¯åˆ›å»ºä¸Šä¸‹æ–‡"""
        return HandlerContext()
    
    def create_data_sink(self, handler_context):
        """åˆ›å»ºæ•°æ®å¤„ç†ç®¡é“"""
        return DataSink(handler_context)
    
    def destroy(self):
        """æ¸…ç†èµ„æº"""
        pass
```

### WebRTCå®æ—¶é€šä¿¡

#### ç½‘ç»œé€šä¿¡æ–¹æ¡ˆ

```yaml
# TURNæœåŠ¡å™¨é…ç½®
turn_config:
  urls: 
    - "stun:stun.l.google.com:19302"    # Google STUNæœåŠ¡å™¨
    - "turn:8.138.87.249:3478"          # è‡ªå»ºTURNæœåŠ¡å™¨
  username: "username"
  credential: "password"
```

#### æ•°æ®æµè®¾è®¡

```python
# WebRTCæ•°æ®æµå®šä¹‰
video_output_definition = DataBundleDefinition()
video_output_definition.add_entry(DataBundleEntry.create_framed_entry(
    "camera_video",
    [VariableSize(), VariableSize(), VariableSize(), 3],  # [H, W, C, 3]
    0,      # æ—¶é—´æˆ³èµ·å§‹
    30      # 30fps
))
```

### æ•°æ®å¤„ç†æµç¨‹

```
ğŸ‘¤ ç”¨æˆ·
â”‚
â”œâ”€ ğŸ“· æ‘„åƒå¤´ç”»é¢ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                            â”‚
â”œâ”€ ğŸ¤ è¯­éŸ³è¾“å…¥ â”€â”€â–º ğŸ‘‚ VAD â”€â”€â–º ğŸ§ ASR â”€â”€â–º ğŸ“ æ–‡æœ¬ â”€â”¤
â”‚                                            â”‚
â””â”€ ğŸ’¬ æ–‡å­—è¾“å…¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                             â”‚
                                             â–¼
                                    ğŸ§  å¤šæ¨¡æ€LLM
                                    (å›¾åƒ+æ–‡æœ¬ç†è§£)
                                             â”‚
                                             â–¼
                                      ğŸ’­ AIå“åº”æ–‡æœ¬
                                             â”‚
                                             â–¼
                                      ğŸ”Š TTSè¯­éŸ³åˆæˆ
                                             â”‚
                                             â–¼
                                      ğŸ­ æ•°å­—äººæ¸²æŸ“
                                             â”‚
                                             â–¼
                                    ğŸ“¹ æœ€ç»ˆè§†é¢‘è¾“å‡º
                                             â”‚
                                             â–¼
                                        ğŸ‘¤ ç”¨æˆ·è§‚çœ‹
```

---

## é¡¹ç›®ç»“æ„è¯¦è§£

### æ ¹ç›®å½•ç»“æ„æ€»è§ˆ

```
OpenAvatarChat/
â”œâ”€â”€ ğŸ“± å¯åŠ¨è„šæœ¬ç»„
â”‚   â”œâ”€â”€ 00è¿è¡Œç¨‹åº-VL(æ¨èä½¿ç”¨).bat    # VLè§†è§‰ç†è§£ç‰ˆï¼ˆæ¨èï¼‰
â”‚   â”œâ”€â”€ 01è¿è¡Œç¨‹åº-lam.bat             # LAM 3Dæ•°å­—äºº
â”‚   â”œâ”€â”€ 02è¿è¡Œç¨‹åº-liteavatar.bat      # LiteAvatar 2Dæ•°å­—äºº
â”‚   â”œâ”€â”€ 03è¿è¡Œç¨‹åº-musetalk.bat        # MuseTalk 2Dæ•°å­—äºº
â”‚   â””â”€â”€ 04è¿è¡Œç¨‹åº-lam-VL.bat          # LAM 3D + è§†è§‰ç†è§£
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ config/
â”‚       â”œâ”€â”€ glut*.yaml                 # ç®€åŒ–ä¸€é”®å¯åŠ¨é…ç½®
â”‚       â””â”€â”€ chat_with_*.yaml           # ç”Ÿäº§çº§å®Œæ•´é…ç½®
â”‚
â”œâ”€â”€ ğŸ§  æ ¸å¿ƒæºç 
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ demo.py                    # ä¸»ç¨‹åºå…¥å£ï¼ˆ99è¡Œï¼‰
â”‚       â”œâ”€â”€ chat_engine/               # å¯¹è¯å¼•æ“æ ¸å¿ƒ
â”‚       â”œâ”€â”€ handlers/                  # å¤„ç†å™¨æ¨¡å—
â”‚       â”œâ”€â”€ service/                   # æœåŠ¡æ¡†æ¶
â”‚       â””â”€â”€ engine_utils/              # å¼•æ“å·¥å…·
â”‚
â”œâ”€â”€ ğŸ¤– AIæ¨¡å‹åº“
â”‚   â””â”€â”€ models/
â”‚       â”œâ”€â”€ face-parse-bisent/         # äººè„¸è§£æ
â”‚       â”œâ”€â”€ LAM_audio2exp/            # LAMéŸ³é¢‘è½¬è¡¨æƒ…
â”‚       â”œâ”€â”€ musetalk/                  # MuseTalkæ¨¡å‹
â”‚       â””â”€â”€ iic/SenseVoiceSmall/       # è¯­éŸ³è¯†åˆ«
â”‚
â”œâ”€â”€ ğŸ­ æ•°å­—äººèµ„æº
â”‚   â””â”€â”€ resource/avatar/
â”‚       â””â”€â”€ liteavatar/                # LiteAvatar 2Dèµ„æº
â”‚
â”œâ”€â”€ ğŸ”§ å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ download_*.sh              # æ¨¡å‹ä¸‹è½½è„šæœ¬
â”‚       â”œâ”€â”€ create_ssl_certs.sh        # SSLè¯ä¹¦ç”Ÿæˆ
â”‚       â””â”€â”€ setup_coturn.sh            # TURNæœåŠ¡å™¨é…ç½®
â”‚
â”œâ”€â”€ ğŸŒ å‰ç«¯ç•Œé¢
â”‚   â””â”€â”€ OpenAvatarChat-WebUI/
â”‚       â”œâ”€â”€ src/                       # Vue3æºç 
â”‚       â”œâ”€â”€ dist/                      # æ„å»ºè¾“å‡º
â”‚       â””â”€â”€ package.json               # å‰ç«¯ä¾èµ–
â”‚
â”œâ”€â”€ ğŸ” å®‰å…¨è¯ä¹¦
â”‚   â””â”€â”€ ssl_certs/                     # SSLè¯ä¹¦ç›®å½•
â”‚
â”œâ”€â”€ ğŸ“‹ é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                      # é¡¹ç›®è¯´æ˜
â”‚   â”œâ”€â”€ docs/                          # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ æ–°æ‰‹å…¥é—¨æ•™ç¨‹.html               # æ–°æ‰‹æŒ‡å—
â”‚
â””â”€â”€ ğŸ—ï¸ æ„å»ºå’Œéƒ¨ç½²
    â”œâ”€â”€ Dockerfile                     # Dockeré•œåƒæ„å»º
    â”œâ”€â”€ pyproject.toml                 # Pythoné¡¹ç›®é…ç½®
    â””â”€â”€ setup.cfg                      # é¡¹ç›®è®¾ç½®
```

### æ ¸å¿ƒæºç æ¶æ„ (src/)

#### ä¸»ç¨‹åºå…¥å£

```
src/
â”œâ”€â”€ demo.py                 # ğŸ¯ ä¸»ç¨‹åºå…¥å£ (250è¡Œå®Œæ•´æºç )
â”‚                          #   - FastAPI + Gradio Webåº”ç”¨
â”‚                          #   - ChatEngineåˆå§‹åŒ–å’Œå¯åŠ¨
â”‚                          #   - SSLè¯ä¹¦é…ç½®
â”‚                          #   - å‘½ä»¤è¡Œå‚æ•°è§£æ
â”‚
â””â”€â”€ glut.py                # ğŸ”’ åŠ å¯†ç‰ˆæœ¬ (å·²è¢«demo.pyæ›¿ä»£)
```

**demo.py æ ¸å¿ƒåŠŸèƒ½**:
1. é…ç½®åŠ è½½ï¼ˆæ—¥å¿—ã€æœåŠ¡ã€å¼•æ“ï¼‰
2. ChatEngineåˆ›å»ºå’Œåˆå§‹åŒ–
3. Gradioç•Œé¢è®¾ç½®
4. SSLè¯ä¹¦é…ç½®
5. WebæœåŠ¡å™¨å¯åŠ¨

#### å¯¹è¯å¼•æ“æ ¸å¿ƒ (chat_engine/)

```
chat_engine/                # ğŸ§  å¯¹è¯å¼•æ“ - ç³»ç»Ÿæ ¸å¿ƒè°ƒåº¦å™¨
â”œâ”€â”€ chat_engine.py          #   ğŸ“‹ ä¸»å¼•æ“ç±»
â”œâ”€â”€ common/                 #   ğŸ”§ åŸºç¡€ç±»å®šä¹‰
â”‚   â”œâ”€â”€ handler_base.py            # é€šç”¨å¤„ç†å™¨åŸºç±»  
â”‚   â”œâ”€â”€ client_handler_base.py     # å®¢æˆ·ç«¯å¤„ç†å™¨åŸºç±»
â”‚   â””â”€â”€ engine_channel_type.py     # å¼•æ“é€šé“ç±»å‹
â”œâ”€â”€ contexts/               #   ğŸ“Š ä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”œâ”€â”€ handler_context.py         # å¤„ç†å™¨ä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ session_context.py         # ä¼šè¯ä¸Šä¸‹æ–‡
â”œâ”€â”€ core/                   #   âš™ï¸ æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ chat_session.py           # èŠå¤©ä¼šè¯ç®¡ç†
â”‚   â””â”€â”€ handler_manager.py        # å¤„ç†å™¨ç®¡ç†å™¨
â””â”€â”€ data_models/            #   ğŸ“‹ æ•°æ®æ¨¡å‹
    â”œâ”€â”€ chat_data_type.py         # èŠå¤©æ•°æ®ç±»å‹
    â”œâ”€â”€ chat_engine_config_data.py # å¼•æ“é…ç½®
    â””â”€â”€ session_info_data.py      # ä¼šè¯ä¿¡æ¯
```

#### å¤„ç†å™¨æ¨¡å— (handlers/)

```
handlers/                   # ğŸ”Œ å¤„ç†å™¨æ¨¡å— - æ’ä»¶å¼æ¶æ„
â”‚
â”œâ”€â”€ ğŸ“¹ client/              # å®¢æˆ·ç«¯å¤„ç†å™¨
â”‚   â”œâ”€â”€ h5_rendering_client/        # H5ç«¯ä¾§æ¸²æŸ“
â”‚   â”‚   â”œâ”€â”€ client_handler_lam.py  #   ğŸ­ LAM 3Då®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ lam_samples/           #   ğŸ¨ 3Dæ•°å­—äººèµ„äº§åŒ…
â”‚   â”‚       â”œâ”€â”€ barbara.zip        #     ğŸ‘© Barbara å¥³æ€§
â”‚   â”‚       â”œâ”€â”€ james.zip          #     ğŸ‘¨ James ç”·æ€§  
â”‚   â”‚       â”œâ”€â”€ status.zip         #     ğŸ—¿ Status é›•åƒ
â”‚   â”‚       â””â”€â”€ vfhq_case1.zip     #     âœ¨ VFHQ é«˜è´¨é‡
â”‚   â””â”€â”€ rtc_client/                # WebRTCå®æ—¶å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ client_handler_rtc.py  #   ğŸ“¡ RTCå¤„ç†å™¨
â”‚       â””â”€â”€ frontend/              #   ğŸ–¥ï¸ Vue.jsåº”ç”¨
â”‚
â”œâ”€â”€ ğŸ¤ asr/                 # è¯­éŸ³è¯†åˆ«
â”‚   â””â”€â”€ sensevoice/
â”‚       â””â”€â”€ asr_handler_sensevoice.py  # ğŸ§ SenseVoice ASR
â”‚
â”œâ”€â”€ ğŸ¤– llm/                 # å¤§è¯­è¨€æ¨¡å‹
â”‚   â”œâ”€â”€ openai_compatible/          # OpenAIå…¼å®¹æ¥å£
â”‚   â”‚   â”œâ”€â”€ llm_handler_openai_compatible.py  # ğŸ§  LLMå¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ chat_history_manager.py           # ğŸ’¬ å†å²ç®¡ç†
â”‚   â”œâ”€â”€ minicpm/                   # MiniCPMæœ¬åœ°æ¨¡å‹
â”‚   â”œâ”€â”€ qwen_omni/                 # Qwen-Omniå¤šæ¨¡æ€
â”‚   â””â”€â”€ dify/                      # Difyå¹³å°æ¥å…¥
â”‚
â”œâ”€â”€ ğŸ”Š tts/                 # è¯­éŸ³åˆæˆ
â”‚   â”œâ”€â”€ edgetts/                   # å¾®è½¯Edge TTS (å…è´¹)
â”‚   â”œâ”€â”€ bailian_tts/               # é˜¿é‡Œç™¾ç‚¼CosyVoice
â”‚   â””â”€â”€ cosyvoice/                 # æœ¬åœ°CosyVoice
â”‚
â”œâ”€â”€ ğŸ­ avatar/              # æ•°å­—äººæ¸²æŸ“
â”‚   â”œâ”€â”€ lam/                       # LAM 3Dæ•°å­—äºº
â”‚   â”‚   â””â”€â”€ avatar_handler_lam_audio2expression.py
â”‚   â”œâ”€â”€ liteavatar/                # LiteAvatar 2Dæ•°å­—äºº
â”‚   â”‚   â””â”€â”€ avatar_handler_liteavatar.py
â”‚   â””â”€â”€ musetalk/                  # MuseTalk 2Dæ•°å­—äºº
â”‚       â””â”€â”€ avatar_handler_musetalk.py
â”‚
â””â”€â”€ ğŸ™ï¸ vad/                 # è¯­éŸ³æ´»åŠ¨æ£€æµ‹
    â””â”€â”€ silerovad/
        â””â”€â”€ vad_handler_silero.py  #   ğŸ‘‚ Silero VAD
```

---

## å¿«é€Ÿå¯åŠ¨æŒ‡å—

### ä¸€é”®å¯åŠ¨è„šæœ¬

| å¯åŠ¨è„šæœ¬ | é…ç½®æ–‡ä»¶ | æ•°å­—äººç±»å‹ | LLMæ¨¡å‹ | è§†è§‰ç†è§£ | è¯´æ˜ |
|----------|----------|-----------|---------|----------|------|
| `00è¿è¡Œç¨‹åº-VL(æ¨èä½¿ç”¨).bat` | `glut-VL2.yaml` | **LiteAvatar** (2D) | Qwen3-VL-Plus | âœ… | **æ¨è**ï¼šè§†è§‰ç†è§£2Dç‰ˆ |
| `01è¿è¡Œç¨‹åº-lam.bat` | `glut.yaml` | **LAM** (3D) | Qwen3-Max | âŒ | æ ‡å‡†3Dæ•°å­—äºº |
| `02è¿è¡Œç¨‹åº-liteavatar.bat` | `glut2.yaml` | **LiteAvatar** (2D) | Qwen3-Max | âŒ | é«˜æ•ˆ2Dæ•°å­—äºº |
| `03è¿è¡Œç¨‹åº-musetalk.bat` | `glut3.yaml` | **MuseTalk** (2D) | Qwen3-Max | âŒ | è‡ªå®šä¹‰å½¢è±¡2D |
| `04è¿è¡Œç¨‹åº-lam-VL.bat` | `glut-VL.yaml` | **LAM** (3D) | Qwen3-VL-Plus | âœ… | 3D+è§†è§‰ç†è§£ |

### å¯åŠ¨è„šæœ¬ç¯å¢ƒé…ç½®

æ¯ä¸ªå¯åŠ¨è„šæœ¬ç»Ÿä¸€è®¾ç½®ä»¥ä¸‹ç¯å¢ƒï¼š

```batch
# Pythonç¯å¢ƒ
set "PYTHON=%CD%\.glut\python.exe"

# ä¾èµ–åº“è·¯å¾„
set "CU_PATH=%CD%\.glut\Lib\site-packages\torch\lib"    # PyTorch CUDA
set "SC_PATH=%CD%\.glut\Scripts"                         # Pythonè„šæœ¬
set "GIT_PATH=%CD%\.glut\git\cmd"                        # Gitå·¥å…·
set "FFMPEG_PATH=%CD%\.glut\ffmpeg\bin"                  # FFmpeg

# HuggingFaceé…ç½®
set "HF_ENDPOINT=https://hf-mirror.com"     # å›½å†…é•œåƒ
set "HF_HOME=%CD%\models"                   # æ¨¡å‹ç¼“å­˜

# æ¨¡å‹ç¼“å­˜é…ç½®
set "TORCH_HOME=%CD%\models"
set "MODELSCOPE_CACHE=%CD%"
```

### å¿«é€Ÿä½“éªŒï¼ˆWindowsï¼‰

```bash
# æ–¹å¼ä¸€ï¼šæ¨èæ–¹å¼ï¼ˆè§†è§‰ç†è§£ç‰ˆï¼‰
åŒå‡» 00è¿è¡Œç¨‹åº-VL(æ¨èä½¿ç”¨).bat

# æ–¹å¼äºŒï¼š3Dæ•°å­—äººï¼ˆæ ‡å‡†ç‰ˆï¼‰
åŒå‡» 01è¿è¡Œç¨‹åº-lam.bat

# è®¿é—®ç•Œé¢
æµè§ˆå™¨æ‰“å¼€: https://127.0.0.1:8282
```

### å‘½ä»¤è¡Œå¯åŠ¨

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®
python src/demo.py

# æŒ‡å®šé…ç½®æ–‡ä»¶
python src/demo.py --config config/glut-VL.yaml

# è‡ªå®šä¹‰hostå’Œport
python src/demo.py --host 0.0.0.0 --port 8080 --config config/chat_with_lam.yaml
```

---

## é…ç½®æ–‡ä»¶ä½“ç³»

### é…ç½®æ–‡ä»¶åˆ†ç±»

OpenAvatarChatæä¾›**ä¸¤å¥—é…ç½®ä½“ç³»**ï¼š

#### A. glutç³»åˆ— (ç®€åŒ–ä¸€é”®å¯åŠ¨)

```
config/
â”œâ”€â”€ glut.yaml           # LAM 3Dæ•°å­—äºº (æ ‡å‡†ç‰ˆ)
â”œâ”€â”€ glut2.yaml          # LiteAvatar 2Dæ•°å­—äºº  
â”œâ”€â”€ glut3.yaml          # MuseTalk 2Dæ•°å­—äºº
â”œâ”€â”€ glut-VL.yaml        # LAM 3D + è§†è§‰ç†è§£
â””â”€â”€ glut-VL2.yaml       # LiteAvatar 2D + è§†è§‰ç†è§£ (æ¨è)
```

**ç‰¹ç‚¹**:
- âœ… **ä¸€é”®å¯åŠ¨**: ç¡¬ç¼–ç API Keyï¼Œæ— éœ€é¢å¤–é…ç½®
- âœ… **å®‰å…¨é™åˆ¶**: ä»…æœ¬åœ°è®¿é—® (`host: "127.0.0.1"`)
- âœ… **ç»Ÿä¸€TTS**: å…¨éƒ¨ä½¿ç”¨å…è´¹Edge TTS
- âœ… **ç»Ÿä¸€LLM**: å…¨éƒ¨ä½¿ç”¨é˜¿é‡Œäº‘Qwenç³»åˆ—æ¨¡å‹
- âš ï¸ **æ³¨æ„**: ä»…é€‚åˆä½“éªŒæµ‹è¯•ï¼Œä¸é€‚åˆç”Ÿäº§ç¯å¢ƒ

#### B. chat_with_*ç³»åˆ— (ç”Ÿäº§çº§é…ç½®)

```
config/
â”œâ”€â”€ chat_with_lam.yaml                                    # LAM + ç™¾ç‚¼API
â”œâ”€â”€ chat_with_minicpm.yaml                               # æœ¬åœ°MiniCPM
â”œâ”€â”€ chat_with_qwen_omni.yaml                             # Qwen-Omniå¤šæ¨¡æ€
â”œâ”€â”€ chat_with_openai_compatible.yaml                     # OpenAIå…¼å®¹
â”œâ”€â”€ chat_with_openai_compatible_edge_tts.yaml            # OpenAI + Edge TTS  
â”œâ”€â”€ chat_with_openai_compatible_bailian_cosyvoice.yaml   # OpenAI + ç™¾ç‚¼TTS
â””â”€â”€ chat_with_openai_compatible_bailian_cosyvoice_musetalk.yaml
```

**ç‰¹ç‚¹**:
- âœ… **ç”Ÿäº§å°±ç»ª**: ç¯å¢ƒå˜é‡ç®¡ç†API Key
- âœ… **å¤–ç½‘è®¿é—®**: æ”¯æŒ `host: "0.0.0.0"`  
- âœ… **å¤šé€‰æ‹©**: æ”¯æŒå¤šç§LLMå’ŒTTSæ–¹æ¡ˆ
- âœ… **çµæ´»é…ç½®**: è¯¦ç»†å‚æ•°å¯è°ƒ

### é¢„ç½®æ¨¡å¼å¯¹æ¯”

| é…ç½®åç§° | ASR | LLM | TTS | Avatar | æœ¬åœ°ç®—åŠ›éœ€æ±‚ | æ¨èåœºæ™¯ |
|---------|-----|-----|-----|--------|------------|---------|
| **chat_with_lam.yaml** | SenseVoice | API | API | LAM | æä½ï¼ˆ2GBæ˜¾å­˜ï¼‰ | å¤šè·¯å¹¶å‘ã€äº‘ç«¯éƒ¨ç½² |
| **chat_with_qwen_omni.yaml** | Qwen-Omni | Qwen-Omni | Qwen-Omni | LiteAvatar | ä½ï¼ˆä»…Avatarï¼‰ | ç«¯åˆ°ç«¯è¯­éŸ³äº¤äº’ |
| **chat_with_minicpm.yaml** | MiniCPM-o | MiniCPM-o | MiniCPM-o | LiteAvatar | æé«˜ï¼ˆ20GB+æ˜¾å­˜ï¼‰ | æœ¬åœ°ç§æœ‰åŒ–éƒ¨ç½² |
| **chat_with_openai_compatible.yaml** | SenseVoice | API | CosyVoice | LiteAvatar | ä¸­ï¼ˆæœ¬åœ°TTSï¼‰ | å¹³è¡¡æ–¹æ¡ˆ |
| **chat_with_openai_compatible_bailian_cosyvoice.yaml** | SenseVoice | API | API | LiteAvatar | ä½ | **ç”Ÿäº§æ¨è** |

### æ ¸å¿ƒé…ç½®å‚æ•°

#### å…¨å±€é…ç½®

```yaml
default:
  logger:
    log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR
    
  service:
    host: "0.0.0.0"  # ç›‘å¬åœ°å€
    port: 8282       # ç›‘å¬ç«¯å£
    cert_file: "ssl_certs/localhost.crt"  # SSLè¯ä¹¦
    cert_key: "ssl_certs/localhost.key"   # SSLç§é’¥
    
  chat_engine:
    model_root: "models"  # æ¨¡å‹æ ¹ç›®å½•
    concurrent_li: 1      # æœ€å¤§å¹¶å‘ä¼šè¯æ•°
    handler_search_path:
      - "src/handlers"    # Handleræœç´¢è·¯å¾„
```

#### VADé…ç½®

```yaml
SileroVad:
  speaking_threshold: 0.5   # è¯­éŸ³æ¦‚ç‡é˜ˆå€¼ï¼ˆ0-1ï¼‰
  start_delay: 2048         # èµ·å§‹å»¶è¿Ÿï¼ˆé‡‡æ ·æ•°ï¼‰
  end_delay: 5000           # ç»“æŸå»¶è¿Ÿï¼ˆé‡‡æ ·æ•°ï¼‰
  buffer_look_back: 5000    # å›æº¯ç¼“å†²ï¼ˆé‡‡æ ·æ•°ï¼‰
```

#### LLMé…ç½®ï¼ˆè§†è§‰ç†è§£ç‰ˆï¼‰

```yaml
LLMOpenAICompatible:
  model_name: "qwen3-vl-plus"  # å¤šæ¨¡æ€æ¨¡å‹
  enable_video_input: True      # å¯ç”¨è§†é¢‘è¾“å…¥
  api_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
  api_key: ""  # ä»ç¯å¢ƒå˜é‡è¯»å–
  system_prompt: "ä½ æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹..."
  history_length: 20  # å¯¹è¯å†å²ä¿ç•™æ¡æ•°
```

---

## Handleræ¨¡å—è¯¦è§£

### ä¸‰ç§æ•°å­—äººæ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | æ¸²æŸ“ä½ç½® | è§†è§‰æ•ˆæœ | ç®—åŠ›éœ€æ±‚ | å¹¶å‘èƒ½åŠ› | é€‚ç”¨åœºæ™¯ |
|------|----------|----------|----------|----------|----------|
| **LAM 3D** | å®¢æˆ·ç«¯WebGL | â­â­â­â­â­ è¶…å†™å®3D | æä½ (2GBæ˜¾å­˜) | 5è·¯ | é«˜ç«¯å±•ç¤ºã€VIPæœåŠ¡ |
| **LiteAvatar 2D** | æœåŠ¡ç«¯ç”Ÿæˆ | â­â­â­â­ é«˜è´¨é‡2D | ä¸­ç­‰ (3GBæ˜¾å­˜/è·¯) | 2-3è·¯ | é€šç”¨å®¢æœã€æ•™è‚² |
| **MuseTalk 2D** | æœåŠ¡ç«¯åˆæˆ | â­â­â­ å¯è‡ªå®šä¹‰ | ä¸­ç­‰ (4GBæ˜¾å­˜/è·¯) | 1-2è·¯ | ä¸ªæ€§åŒ–å®šåˆ¶ |

### LAM 3Dæ•°å­—äºº

**ç‰¹ç‚¹**:
- **å®¢æˆ·ç«¯æ¸²æŸ“**: Gaussian SplattingæŠ€æœ¯ï¼Œ3Dèµ„äº§ä¸‹è½½åˆ°æµè§ˆå™¨
- **ç®—åŠ›æä½**: æœåŠ¡ç«¯ä»…å¤„ç†AIæ¨ç†ï¼Œæ¸²æŸ“äº¤ç»™å®¢æˆ·ç«¯GPU
- **è§†è§‰æ•ˆæœæœ€ä½³**: è¶…å†™å®3Dæ•ˆæœï¼Œæ”¯æŒå¤šè§’åº¦è§‚çœ‹
- **é«˜å¹¶å‘**: æ”¯æŒ5è·¯å¹¶å‘

**é…ç½®ç¤ºä¾‹**:
```yaml
LamClient:
  module: client/h5_rendering_client/client_handler_lam
  asset_path: "lam_samples/barbara.zip"
  concurrent_limit: 5

LAM_Driver:
  module: avatar/lam/avatar_handler_lam_audio2expression
```

**ä¾èµ–æ¨¡å‹**:
- facebook/wav2vec2-base-960h
- LAM_audio2exp

### LiteAvatar 2Dæ•°å­—äºº

**ç‰¹ç‚¹**:
- **æœåŠ¡ç«¯æ¸²æŸ“**: æœåŠ¡ç«¯ç”Ÿæˆ2Dè§†é¢‘æµ
- **GPU/CPUåŒæ¨¡å¼**: çµæ´»é€‰æ‹©æ¨ç†æ–¹å¼
- **å®˜æ–¹å½¢è±¡åº“**: 100+å½¢è±¡èµ„æº
- **å¤šä¼šè¯æ”¯æŒ**: é…ç½®concurrent_li

**é…ç½®ç¤ºä¾‹**:
```yaml
LiteAvatar:
  module: avatar/liteavatar/avatar_handler_liteavatar
  avatar_name: 20250408/sample_data
  fps: 25
  use_gpu: true
  enable_fast_mode: false
```

**æ€§èƒ½æŒ‡æ ‡**:
- **å¸§ç‡**: GPUæ¨¡å¼30FPS / CPUæ¨¡å¼25-30FPSï¼ˆi9-13980HXï¼‰
- **æ˜¾å­˜å ç”¨**: çº¦3GB/è·¯
- **å¹¶å‘èƒ½åŠ›**: 2-3è·¯ï¼ˆ12GBæ˜¾å¡ï¼‰

### MuseTalk 2Dæ•°å­—äºº

**ç‰¹ç‚¹**:
- **è‡ªå®šä¹‰å½¢è±¡**: æ”¯æŒä»»æ„åº•ç‰ˆè§†é¢‘
- **ä»…GPUæ¨ç†**: æš‚ä¸æ”¯æŒCPUæ¨¡å¼
- **MuseTalk 1.5**: æœ€æ–°ç‰ˆæœ¬

**é…ç½®ç¤ºä¾‹**:
```yaml
Avatar_MuseTalk:
  module: avatar/musetalk/avatar_handler_musetalk
  fps: 20  # æ¨èå¸§ç‡
  batch_size: 2  # æ‰¹å¤„ç†å¤§å°ï¼ˆæœ€å°2ï¼‰
  avatar_video_path: "src/handlers/avatar/musetalk/MuseTalk/data/video/sun.mp4"
  avatar_model_dir: "models/musetalk/avatar_model"
  force_create_avatar: false
```

### LLM Handleré€‰æ‹©

#### OpenAIå…¼å®¹API Handler

**æ”¯æŒçš„APIæä¾›å•†**:
- é˜¿é‡Œäº‘ç™¾ç‚¼: `https://dashscope.aliyuncs.com/compatible-mode/v1`
- Ollamaæœ¬åœ°: `http://127.0.0.1:11434/v1`
- Google Gemini: `https://generativelanguage.googleapis.com/v1beta/openai/`
- DeepSeek: `https://api.deepseek.com`

**é…ç½®ç¤ºä¾‹**:
```yaml
LLMOpenAICompatible: 
  model_name: "qwen-plus"
  system_prompt: "ä½ æ˜¯ä¸ªAIåŠ©æ‰‹..."
  api_url: 'https://dashscope.aliyuncs.com/compatible-mode/v1'
  api_key: ''  # ä»ç¯å¢ƒå˜é‡DASHSCOPE_API_KEYè¯»å–
```

#### MiniCPM-o Handlerï¼ˆæœ¬åœ°æ¨ç†ï¼‰

**ç‰¹ç‚¹**:
- ç«¯åˆ°ç«¯å¤šæ¨¡æ€æ¨¡å‹ï¼ˆAudio-to-Audioï¼‰
- æ”¯æŒéŸ³é¢‘è¾“å…¥ã€è§†é¢‘è¾“å…¥
- æ˜¾å­˜éœ€æ±‚: å®Œæ•´ç‰ˆ20GB+ / INT4é‡åŒ–ç‰ˆ<10GB

**é…ç½®ç¤ºä¾‹**:
```yaml
S2S_MiniCPM:
  model_name: "MiniCPM-o-2_6"  # æˆ– "MiniCPM-o-2_6-int4"
  voice_prompt: ""
  assistant_prompt: ""
  enable_video_input: false
  skip_video_frame: -1  # -1: æ¯ç§’æœ€åä¸€å¸§, 0: æ‰€æœ‰å¸§, >0: è·³å¸§
```

### TTS Handleré€‰æ‹©

| æ–¹æ¡ˆ | æˆæœ¬ | éŸ³è´¨ | é…ç½®å¤æ‚åº¦ |
|------|------|------|----------|
| **Edge TTS** | ğŸ’š å…è´¹ | â­â­â­â­ | æ— éœ€é…ç½® |
| **ç™¾ç‚¼CosyVoice** | ğŸ’° ä»˜è´¹ | â­â­â­â­â­ | éœ€API Key |
| **æœ¬åœ°CosyVoice** | ğŸ’š å…è´¹ | â­â­â­â­â­ | éœ€GPUï¼ŒWindowséœ€Conda |

---

## éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šæœ¬åœ°è¿è¡Œï¼ˆæ¨èå¼€å‘ï¼‰

#### ç¯å¢ƒè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux / Windows
- **Python**: 3.11.7 ~ 3.11.11
- **CUDA**: 12.4+
- **æ˜¾å­˜**: æ ¹æ®é…ç½®ï¼Œæœ€ä½2GB

#### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®ï¼ˆå¿…é¡»ä½¿ç”¨gitï¼‰
git clone https://github.com/HumanAIGC-Engineering/OpenAvatarChat.git
cd OpenAvatarChat

# 2. å®‰è£…git-lfs
sudo apt install git-lfs  # Linux
# Windows: https://git-lfs.github.com/

# 3. åˆå§‹åŒ–git-lfs
git lfs install

# 4. æ‹‰å–å­æ¨¡å—
git submodule update --init --recursive --depth 1

# 5. å®‰è£…uv
# Linux/macOS:
curl -LsSf https://astral.sh/uv/install.sh | sh
# Windows:
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"

# 6. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv --python 3.11.11

# 7. å®‰è£…ä¾èµ–
# æ–¹å¼ä¸€ï¼šå…¨éƒ¨ä¾èµ–
uv sync --all-packages

# æ–¹å¼äºŒï¼šä»…æŒ‡å®šé…ç½®ä¾èµ–
uv pip install setuptools pip
uv run install.py --uv --config config/chat_with_openai_compatible_bailian_cosyvoice.yaml
./scripts/post_config_install.sh --config config/chat_with_openai_compatible_bailian_cosyvoice.yaml

# 8. ä¸‹è½½æ¨¡å‹
bash scripts/download_liteavatar_weights.sh

# 9. é…ç½®ç¯å¢ƒå˜é‡
echo "DASHSCOPE_API_KEY=sk-your-api-key" > .env

# 10. ç”ŸæˆSSLè¯ä¹¦ï¼ˆå¯é€‰ï¼‰
bash scripts/create_ssl_certs.sh

# 11. è¿è¡Œ
uv run src/demo.py --config config/chat_with_openai_compatible_bailian_cosyvoice.yaml
```

#### Windowsä¸‹CosyVoiceç‰¹æ®Šå¤„ç†

```bash
# ä½¿ç”¨Conda + UVç»„åˆæ–¹å¼
conda create -n openavatarchat python=3.11
conda activate openavatarchat
conda install -c conda-forge pynini==2.1.6

# è®¾ç½®ç¯å¢ƒå˜é‡
set VIRTUAL_ENV=%CONDA_PREFIX%  # cmd
$env:VIRTUAL_ENV=$env:CONDA_PREFIX  # powershell

# å®‰è£…ä¾èµ–
uv sync --active --all-packages

# è¿è¡Œ
uv run --active src/demo.py --config config/chat_with_openai_compatible.yaml
```

### æ–¹æ¡ˆäºŒï¼šDockeréƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ï¼‰

#### ç¯å¢ƒè¦æ±‚
- Docker + NVIDIA Container Toolkit
- NVIDIAé©±åŠ¨: æ”¯æŒCUDA 12.8+

#### éƒ¨ç½²æ­¥éª¤ï¼ˆCUDA 12.8ï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/HumanAIGC-Engineering/OpenAvatarChat.git
cd OpenAvatarChat

# 2. ä¸‹è½½å­æ¨¡å—
git submodule update --init --recursive --depth 1

# 3. ä¸‹è½½æ‰€æœ‰æ¨¡å‹
bash scripts/download_liteavatar_weights.sh
bash scripts/download_musetalk_weights.sh

# LAMæ¨¡å‹
git clone --depth 1 https://www.modelscope.cn/AI-ModelScope/wav2vec2-base-960h.git ./models/wav2vec2-base-960h
wget https://virutalbuy-public.oss-cn-hangzhou.aliyuncs.com/share/aigc3d/data/LAM/LAM_audio2exp_streaming.tar -P ./models/LAM_audio2exp/
tar -xzvf ./models/LAM_audio2exp/LAM_audio2exp_streaming.tar -C ./models/LAM_audio2exp

# 4. é…ç½®ç¯å¢ƒå˜é‡
echo "DASHSCOPE_API_KEY=sk-your-api-key" > .env

# 5. æ„å»ºé•œåƒ
bash build_cuda128.sh

# 6. è¿è¡Œå®¹å™¨
bash run_docker_cuda128.sh --config config/chat_with_openai_compatible_bailian_cosyvoice_musetalk.yaml
```

### ç½‘ç»œéƒ¨ç½²é…ç½®

#### éƒ¨ç½²åœºæ™¯åˆ†ç±»

**1. æœ¬åœ°è®¿é—®ï¼ˆlocalhostï¼‰**
```yaml
æ— éœ€ç‰¹æ®Šé…ç½®
è®¿é—®åœ°å€: https://localhost:8282
```

**2. å±€åŸŸç½‘è®¿é—®ï¼ˆå¿…éœ€SSLï¼‰**
```bash
# ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
bash scripts/create_ssl_certs.sh

# é…ç½®
service:
  cert_file: "ssl_certs/localhost.crt"
  cert_key: "ssl_certs/localhost.key"

# è®¿é—®: https://<å±€åŸŸç½‘IP>:8282
# æ³¨æ„: éœ€è¦æ‰‹åŠ¨ä¿¡ä»»è¯ä¹¦
```

**3. å…¬ç½‘è®¿é—®ï¼ˆå¿…éœ€SSL + TURNï¼‰**

```bash
# 1. SSLè¯ä¹¦ï¼ˆLet's Encryptï¼‰
sudo apt install certbot
certbot certonly --standalone -d yourdomain.com

# é…ç½®
service:
  cert_file: "/etc/letsencrypt/live/yourdomain.com/fullchain.pem"
  cert_key: "/etc/letsencrypt/live/yourdomain.com/privkey.pem"

# 2. TURN Serveré…ç½®
chmod 777 scripts/setup_coturn.sh
sudo scripts/setup_coturn.sh

# ä¿®æ”¹é…ç½®æ–‡ä»¶
default:
  chat_engine:
    handler_configs:
      RtcClient:
        turn_config:
          turn_provider: "turn_server"
          urls: 
            - "turn:your-domain.com:3478"
            - "turns:your-domain.com:5349"
          username: "your-username"
          credential: "your-password"

# 3. å¼€æ”¾é˜²ç«å¢™ç«¯å£
# TCP/UDP 3478, 5349
# UDP 49152-65535
```

---

## æ€§èƒ½ä¼˜åŒ–

### GPUæ˜¾å­˜ä¼˜åŒ–

#### æ˜¾å­˜åˆ†é…ç­–ç•¥
```python
# LiteAvatar: ~3GB/è·¯
# MuseTalk: ~4GB/è·¯
# CosyVoice: ~2GB
# MiniCPM-o: 20GBï¼ˆå®Œæ•´ç‰ˆï¼‰/ 8GBï¼ˆINT4ï¼‰

# é…ç½®ç¤ºä¾‹ï¼ˆ12GBæ˜¾å¡ï¼‰
concurrent_li: 2  # LiteAvataråŒè·¯
# æˆ–
concurrent_li: 1  # MuseTalkå•è·¯
```

#### æ¨¡å‹é‡åŒ–
```bash
# MiniCPM-o INT4é‡åŒ–
scripts/download_MiniCPM-o_2.6-int4.sh
```

### å»¶è¿Ÿä¼˜åŒ–

#### LiteAvatarå¿«é€Ÿæ¨¡å¼
```yaml
LiteAvatar:
  enable_fast_mode: true  # ä½å»¶è¿Ÿæ¨¡å¼
  # æ³¨æ„: å¯èƒ½å¯¼è‡´å¼€å§‹æ—¶è¯­éŸ³å¡é¡¿
```

#### VADå‚æ•°è°ƒä¼˜
```yaml
SileroVad:
  end_delay: 3000  # é™ä½ç»“æŸå»¶è¿Ÿï¼ˆé»˜è®¤5000ï¼‰
  # æƒè¡¡: å»¶è¿Ÿ vs æˆªæ–­é£é™©
```

### å¹¶å‘ä¼˜åŒ–

#### LiteAvatarå¤šä¼šè¯
```yaml
default:
  chat_engine:
    concurrent_li: 3  # æœ€å¤§3è·¯å¹¶å‘
    
LiteAvatar:
  use_gpu: true
  # æ˜¾å­˜éœ€æ±‚: 3GB * 3 = 9GB
```

#### LAMé«˜å¹¶å‘æ–¹æ¡ˆ
```yaml
LamClient:
  concurrent_li: 5  # å®¢æˆ·ç«¯æ¸²æŸ“ï¼ŒæœåŠ¡ç«¯å‹åŠ›å°
```

### æ€§èƒ½åŸºå‡†æµ‹è¯•

**æµ‹è¯•ç¯å¢ƒ**:
- CPU: Intel i9-13900KF
- GPU: NVIDIA RTX 4090 (24GB)
- RAM: 32GB DDR5

**å»¶è¿Ÿæµ‹è¯•**:
| é˜¶æ®µ | å¹³å‡å»¶è¿Ÿ | å¤‡æ³¨ |
|-----|---------|------|
| VADæ£€æµ‹ | 200ms | end_delay=5000 |
| ASRè¯†åˆ« | 150ms | SenseVoice |
| LLMæ¨ç† | 800ms | Qwen-Plus, é¦–token |
| TTSåˆæˆ | 300ms | ç™¾ç‚¼CosyVoice |
| Avataræ¸²æŸ“ | 100ms | LiteAvatar GPU |
| RTCä¼ è¾“ | 50ms | å±€åŸŸç½‘ |
| **æ€»è®¡** | **~2.2s** | ç«¯åˆ°ç«¯ |

---

## å¼€å‘æŒ‡å—

### è‡ªå®šä¹‰Handlerå¼€å‘

#### 1. HandleråŸºç±»

```python
from chat_engine.common.handler_base import HandlerBase

class MyHandler(HandlerBase):
    def initialize(self, config):
        """åˆå§‹åŒ–Handlerï¼ˆåŠ è½½æ¨¡å‹ç­‰ï¼‰"""
        pass
    
    def create_context(self, session_context):
        """ä¸ºæ¯ä¸ªä¼šè¯åˆ›å»ºä¸Šä¸‹æ–‡"""
        return MyHandlerContext()
    
    def create_data_sink(self, handler_context):
        """åˆ›å»ºæ•°æ®å¤„ç†ç®¡é“"""
        return MyDataSink(handler_context)
    
    def destroy(self):
        """æ¸…ç†èµ„æº"""
        pass
```

#### 2. Handleræ³¨å†Œ

```toml
# pyproject.toml
[project]
name = "my-handler"
dependencies = [
    "numpy",
]
```

```yaml
# config.yaml
handler_configs:
  MyHandler:
    enabled: true
    module: "path/to/my_handler"
```

#### 3. æ•°æ®æµå¤„ç†

```python
class MyDataSink:
    async def process(self):
        while True:
            data = await self.input_queue.get()
            result = self.my_processing(data)
            await self.output_queue.put(result)
```

### å‰ç«¯å®šåˆ¶å¼€å‘

**å‰ç«¯ä»£ç ä½ç½®**: `src/handlers/client/rtc_client/frontend/`

**æŠ€æœ¯æ ˆ**:
- Vue 3 + TypeScript
- Vite æ„å»ºå·¥å…·
- WebRTC API

**æ„å»ºå‰ç«¯**:
```bash
cd src/handlers/client/rtc_client/frontend/
pnpm install
pnpm build  # è¾“å‡ºåˆ° dist/
```

**ç‹¬ç«‹å‰ç«¯ä»“åº“**:
[OpenAvatarChat-WebUI](https://github.com/HumanAIGC-Engineering/OpenAvatarChat-WebUI)

### è°ƒè¯•æŠ€å·§

```yaml
# 1. å¼€å¯è°ƒè¯•æ—¥å¿—
logger:
  log_level: "DEBUG"

# 2. Handlerè°ƒè¯•æ¨¡å¼
LiteAvatar:
  debug: true

# 3. æŸ¥çœ‹æ—¥å¿—
tail -f logs/log.log
```

---

## åº”ç”¨åœºæ™¯

### 1. ä¼ä¸šçº§åº”ç”¨
- **æ™ºèƒ½å®¢æœ**: ç†è§£ç”¨æˆ·æ‰‹åŠ¿å’Œç‰©å“ï¼Œæä¾›ç²¾å‡†æœåŠ¡
- **è¿œç¨‹åä½œ**: å±å¹•å…±äº«+AIåˆ†æï¼Œæ™ºèƒ½ä¼šè®®åŠ©æ‰‹
- **å®‰å…¨ç›‘æ§**: å®æ—¶è§†é¢‘åˆ†æï¼Œå¼‚å¸¸è¡Œä¸ºæ£€æµ‹

### 2. æ•™è‚²åŸ¹è®­  
- **æ™ºèƒ½æ•™å¸ˆ**: è§‚å¯Ÿå­¦ç”ŸçŠ¶æ€ï¼Œä¸ªæ€§åŒ–æ•™å­¦æŒ‡å¯¼
- **å®éªŒæŒ‡å¯¼**: ç†è§£å®éªŒæ“ä½œï¼Œæä¾›å®æ—¶æŒ‡å¯¼
- **è¯­è¨€å­¦ä¹ **: è§‚å¯Ÿå£å‹å’Œè¡¨æƒ…ï¼Œçº æ­£å‘éŸ³

### 3. åŒ»ç–—å¥åº·
- **è¿œç¨‹è¯Šç–—**: è§‚å¯Ÿæ‚£è€…ç—‡çŠ¶ï¼Œè¾…åŠ©åŒ»ç”Ÿè¯Šæ–­
- **åº·å¤æŒ‡å¯¼**: ç›‘æ§åº·å¤åŠ¨ä½œï¼Œæä¾›ä¸“ä¸šå»ºè®®
- **å¿ƒç†è¾…å¯¼**: åˆ†æé¢éƒ¨è¡¨æƒ…ï¼Œæƒ…æ„ŸçŠ¶æ€è¯„ä¼°

### 4. å¨±ä¹äº’åŠ¨
- **è™šæ‹Ÿä¸»æ’­**: ç›´æ’­å’Œå†…å®¹åˆ›ä½œ
- **æ¸¸æˆNPC**: æ™ºèƒ½æ¸¸æˆè§’è‰²
- **ç¤¾äº¤é™ªä¼´**: è™šæ‹Ÿæœ‹å‹å’Œä¼™ä¼´

### åœºæ™¯æ–¹æ¡ˆæ¨è

| åº”ç”¨åœºæ™¯ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|----------|----------|------|
| **é«˜ç«¯å±•ç¤º** | LAM 3D + VL | è¶…å†™å®æ•ˆæœ + è§†è§‰ç†è§£ |
| **å¤§è§„æ¨¡å®¢æœ** | LiteAvatar 2D | æˆæœ¬æ•ˆç›Šæœ€ä½³ |
| **ä¸ªæ€§åŒ–å®šåˆ¶** | MuseTalk 2D | æ”¯æŒè‡ªå®šä¹‰å½¢è±¡ |
| **å¿«é€ŸåŸå‹** | glutç³»åˆ— | ä¸€é”®å¯åŠ¨æ— éœ€é…ç½® |
| **ä¼ä¸šç”Ÿäº§** | chat_with_lam.yaml | ç”Ÿäº§çº§é…ç½® |

---

## å¸¸è§é—®é¢˜

### å®‰è£…é—®é¢˜

**Q1: git submoduleæ‹‰å–å¤±è´¥**

```bash
# é‡æ–°æ‹‰å–
git submodule update --init --recursive --depth 1

# æ£€æŸ¥çŠ¶æ€
git submodule status

# æ‰‹åŠ¨å…‹éš†
cd src/third_party/
git clone https://github.com/HumanAIGC-Engineering/gradio-webrtc.git gradio_webrtc_videochat
```

**Q2: Windowsä¸‹'gbk'ç¼–ç é”™è¯¯**

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
set PYTHONUTF8=1  # cmd
$env:PYTHONUTF8=1  # powershell
```

### è¿è¡Œé—®é¢˜

**Q3: ç‚¹å‡»"å¼€å§‹å¯¹è¯"åä¸€ç›´ç­‰å¾…**

**åŸå› **: NATç©¿é€å¤±è´¥

**è§£å†³**:
```bash
# 1. å®‰è£…TURNæœåŠ¡å™¨
bash scripts/setup_coturn.sh

# 2. æ£€æŸ¥coturnçŠ¶æ€
systemctl status coturn

# 3. é…ç½®TURN
# ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„turn_config
```

**Q4: æ˜¾å­˜ä¸è¶³ï¼ˆOOMï¼‰**

```yaml
# æ–¹æ¡ˆä¸€ï¼šå‡å°‘å¹¶å‘
concurrent_li: 1

# æ–¹æ¡ˆäºŒï¼šä½¿ç”¨CPU
LiteAvatar:
  use_gpu: false

# æ–¹æ¡ˆä¸‰ï¼šé‡åŒ–æ¨¡å‹
S2S_MiniCPM:
  model_name: "MiniCPM-o-2_6-int4"

# æ–¹æ¡ˆå››ï¼šä½¿ç”¨API
# ä½¿ç”¨cloud APIä»£æ›¿æœ¬åœ°æ¨ç†
```

### æ€§èƒ½é—®é¢˜

**Q5: Avataræ¸²æŸ“å¡é¡¿**

```yaml
# MuseTalk: é™ä½FPS
Avatar_MuseTalk:
  fps: 15

# LiteAvatar: ä½¿ç”¨GPU
LiteAvatar:
  use_gpu: true
  fps: 25
```

---

## æŠ€æœ¯åˆ›æ–°ç‚¹æ€»ç»“

### 1. ğŸ†• å®æ—¶è§†è§‰ç†è§£
- **åˆ›æ–°**: å°†å®æ—¶è§†é¢‘æµä¸LLMç»“åˆ
- **æŠ€æœ¯**: WebRTC + å¸§é‡‡æ · + Base64ç¼–ç  + å¤šæ¨¡æ€API
- **åº”ç”¨**: è§†è§‰é—®ç­”ã€åœºæ™¯ç†è§£ã€ç‰©ä½“è¯†åˆ«

### 2. ğŸ†• æ¨¡å—åŒ–Handleræ¶æ„
- **è®¾è®¡**: æ’ä»¶å¼å¤„ç†å™¨ï¼Œæ˜“æ‰©å±•æ˜“ç»´æŠ¤
- **ç‰¹ç‚¹**: æ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œæ”¯æŒçµæ´»ç»„åˆ
- **ä¼˜åŠ¿**: å¯æŒ‰éœ€é€‰æ‹©AIæ¨¡å‹å’Œæ¸²æŸ“æ–¹æ¡ˆ

### 3. ğŸ†• å¤šæ–¹æ¡ˆæ•°å­—äººæ¸²æŸ“
- **3D LAM**: å®¢æˆ·ç«¯WebGLæ¸²æŸ“ï¼Œç®—åŠ›éœ€æ±‚æä½
- **2D LiteAvatar**: æœåŠ¡ç«¯ç”Ÿæˆï¼Œè´¨é‡æ•ˆæœå¹³è¡¡
- **2D MuseTalk**: è‡ªå®šä¹‰å½¢è±¡ï¼Œä¸ªæ€§åŒ–å®šåˆ¶

### 4. ğŸ†• WebRTCä¼˜åŒ–é€šä¿¡
- **TURNæœåŠ¡å™¨**: è§£å†³NATç©¿é€é—®é¢˜
- **è´¨é‡è‡ªé€‚åº”**: æ ¹æ®ç½‘ç»œçŠ¶å†µè°ƒæ•´ä¼ è¾“è´¨é‡
- **å¤šè·¯å¤ç”¨**: éŸ³é¢‘ã€è§†é¢‘ã€æ•°æ®é€šé“åŒæ—¶ä¼ è¾“

---

## å¼•ç”¨ä¸è‡´è°¢

### å¼•ç”¨

å¦‚æœæœ¬é¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·å¼•ç”¨ï¼š

```bibtex
@software{avatarchat2025,
  author = {Gang Cheng, Tao Chen, Feng Wang, Binchao Huang, Hui Xu, Guanqiao He, Yi Lu, Shengyin Tan},
  title = {OpenAvatarChat},
  year = {2025},
  publisher = {GitHub},
  url = {https://github.com/HumanAIGC-Engineering/OpenAvatarChat}
}
```

### ç»„ä»¶ä¾èµ–

| ç±»å‹ | é¡¹ç›® | é“¾æ¥ |
|------|------|------|
| RTC | gradio-webrtc | [GitHub](https://github.com/HumanAIGC-Engineering/gradio-webrtc) |
| WebUI | OpenAvatarChat-WebUI | [GitHub](https://github.com/HumanAIGC-Engineering/OpenAvatarChat-WebUI) |
| VAD | silero-vad | [GitHub](https://github.com/snakers4/silero-vad) |
| LLM | MiniCPM-o | [GitHub](https://github.com/OpenBMB/MiniCPM-o) |
| Avatar | lite-avatar | [GitHub](https://github.com/HumanAIGC/lite-avatar) |
| TTS | CosyVoice | [GitHub](https://github.com/FunAudioLLM/CosyVoice) |
| Avatar | LAM | [GitHub](https://github.com/aigc3d/LAM) |
| Avatar | MuseTalk | [GitHub](https://github.com/TMElyralab/MuseTalk) |

### è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å›¢é˜Ÿå’Œä¸ªäººï¼š
- **HumanAIGC-Engineering Team**: æ ¸å¿ƒå¼€å‘å›¢é˜Ÿ
- **OpenBMB**: MiniCPM-oæ¨¡å‹
- **FunAudioLLM**: CosyVoiceé¡¹ç›®
- **TMElyralab**: MuseTalké¡¹ç›®
- **aigc3d**: LAMé¡¹ç›®
- **æ‰€æœ‰ç¤¾åŒºè´¡çŒ®è€…**: åé¦ˆã€æµ‹è¯•ã€æ–‡æ¡£å®Œå–„

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0  
**ç”Ÿæˆæ—¥æœŸ**: 2025-11-11  
**æ–‡æ¡£ç»´æŠ¤**: å»–ä¼Ÿæ°  
**é¡¹ç›®å¼€å‘**: HumanAIGC-Engineering Teamï¼ˆåŸå§‹ï¼‰ã€å»–ä¼Ÿæ°ï¼ˆæ‰©å±•ä¸å¢å¼ºï¼‰  

---

*æœ¬æ–‡æ¡£æ•´åˆäº†é¡¹ç›®çš„æŠ€æœ¯æ¶æ„ã€ç»“æ„è¯´æ˜å’ŒåŠŸèƒ½æ€»ç»“ï¼Œæ—¨åœ¨æä¾›å…¨é¢çš„æŠ€æœ¯æŒ‡å—ã€‚å¦‚æœ‰ç–æ¼æˆ–æ›´æ–°ï¼Œæ¬¢è¿æäº¤PRå®Œå–„ã€‚*

