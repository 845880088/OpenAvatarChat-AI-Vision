# 🖥️ 屏幕共享使用指南

## 功能概述

OpenAvatarChat的屏幕共享功能让AI助手能够实时看到你的屏幕内容，实现更智能的交互体验。

## 🚀 使用步骤

### 1. 启动应用
```bash
# 启动后端
04运行程序-lam-VL.bat

# 访问前端界面
https://liao.uunat.com:8282/webui/
```

### 2. 开始对话
- 点击 **"点击开始对话"** 按钮
- 授予**麦克风**和**摄像头**权限

### 3. 启动屏幕共享
- 点击右上角**屏幕共享**图标 (📱)
- 选择要共享的屏幕/窗口/标签页
- 点击 **"共享"** 按钮

### 4. AI分析屏幕
现在AI可以看到你的屏幕内容！你可以问：
- "你看到了什么？"
- "帮我分析这个界面"
- "这个错误是什么意思？"
- "怎么操作这个软件？"

### 5. 停止屏幕共享
- 再次点击**屏幕共享**图标
- 或点击浏览器顶部的 **"停止共享"** 通知

## 🔧 权限设置

### 摄像头权限问题
如果看不到摄像头画面：
1. 点击地址栏左侧 **🔒 锁图标**
2. 选择 **"网站设置"**
3. 将 **"相机"** 设置为 **"允许"**
4. 刷新页面 (`F5`)

### 屏幕共享权限
首次使用时浏览器会提示权限，选择 **"允许"**。

## 🎯 最佳实践

### 屏幕内容优化
- **清晰度**: 选择主显示器共享获得最佳效果
- **隐私保护**: 关闭敏感信息窗口
- **窗口大小**: 适当调整窗口大小提高识别准确度

### 交互技巧
- **具体描述**: "分析左上角的按钮" 比 "这是什么" 更精确
- **步骤引导**: "下一步应该点击哪里？"
- **问题诊断**: "这个错误信息是什么意思？"

## 🐛 常见问题

### Q: 屏幕共享后AI看不到内容？
**A**: 检查是否正确选择了要共享的屏幕。避免共享空白窗口。

### Q: 摄像头消失了怎么办？
**A**: 
1. 检查摄像头权限设置
2. 刷新页面重新授权
3. 重启浏览器

### Q: 画面延迟怎么办？
**A**: 
1. 关闭不必要的应用程序
2. 选择较小的窗口共享
3. 检查网络连接

### Q: 屏幕共享突然停止？
**A**: 
1. 检查是否意外关闭了共享窗口
2. 重新点击屏幕共享图标
3. 重新选择要共享的内容

## 🔍 调试日志

开发者可以通过浏览器控制台查看详细日志：

```javascript
// 成功启动屏幕共享
🎉 成功！屏幕内容现在传送给AI了，AI可以看到你的屏幕！

// 轨道替换详情
🔍 轨道替换详情: {oldTrack: 'camera', newTrack: 'screen:0:0'}
```

## 🎉 技术原理

屏幕共享基于WebRTC技术：
1. **捕获**: `getDisplayMedia()` 获取屏幕流
2. **传输**: `RTCRtpSender.replaceTrack()` 替换视频轨道
3. **处理**: AI接收Base64编码的屏幕图像
4. **分析**: 多模态模型理解屏幕内容

---

**开发者**:  廖伟杰  
**更新时间**: 2025年11月6日
