# OpenAvatarChat é¡¹ç›®æ·±åº¦æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

### åŸºæœ¬ä¿¡æ¯
- **é¡¹ç›®åç§°**: OpenAvatarChat
- **ç‰ˆæœ¬**: 0.5.1
- **å¼€å‘å›¢é˜Ÿ**: HumanAIGC-Engineering Team
- **å¼€æºåè®®**: é¡¹ç›®é‡‡ç”¨å¼€æºè®¸å¯ï¼ˆLICENSEæ–‡ä»¶ï¼‰
- **é¡¹ç›®å®šä½**: æ¨¡å—åŒ–çš„äº¤äº’æ•°å­—äººå¯¹è¯å®ç°ç³»ç»Ÿ
- **æŠ€æœ¯ç‰¹æ€§**: å¯åœ¨å•å°PCä¸Šè¿è¡Œå®Œæ•´åŠŸèƒ½çš„å®æ—¶äº¤äº’æ•°å­—äººå¯¹è¯ç³»ç»Ÿ

### é¡¹ç›®æ„¿æ™¯
OpenAvatarChat è‡´åŠ›äºæ‰“é€ ä¸€ä¸ªé«˜åº¦æ¨¡å—åŒ–ã€æ˜“äºå®šåˆ¶çš„æ•°å­—äººå¯¹è¯å¹³å°ï¼Œé€šè¿‡çµæ´»ç»„åˆä¸åŒçš„ç®—æ³•ç»„ä»¶ï¼ˆASRã€LLMã€TTSã€Avatarï¼‰ï¼Œæ»¡è¶³ä»ä¸ªäººå¼€å‘è€…åˆ°ä¼ä¸šçº§åº”ç”¨çš„å¤šæ ·åŒ–éœ€æ±‚ã€‚

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„è®¾è®¡

OpenAvatarChat é‡‡ç”¨äº†é«˜åº¦æ¨¡å—åŒ–çš„åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ å±‚ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯äº¤äº’å±‚ (WebUI)                      â”‚
â”‚          Vue.js + WebRTC + Gradio Integration            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  é€šä¿¡ä¼ è¾“å±‚ (RTC Service)                  â”‚
â”‚            aiortc + FastRTC + WebRTC å®æ—¶é€šä¿¡              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ ¸å¿ƒå¼•æ“å±‚ (Chat Engine)                  â”‚
â”‚    ChatEngine + SessionContext + HandlerManager          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å¤„ç†å™¨å±‚ (Handlers)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ VAD  â”‚â†’ â”‚ ASR  â”‚â†’ â”‚ LLM  â”‚â†’ â”‚ TTS  â”‚â†’ â”‚ Avatar â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ¨¡å‹å±‚ (AI Models)                        â”‚
â”‚  SenseVoice | MiniCPM-o | CosyVoice | LiteAvatar | LAM  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶è¯´æ˜

#### 1. **Chat Engine (æ ¸å¿ƒå¼•æ“)**
- **ä½ç½®**: `src/chat_engine/chat_engine.py`
- **èŒè´£**:
  - ä¼šè¯ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆåˆ›å»ºã€è¿è¡Œã€åœæ­¢ï¼‰
  - Handleræ³¨å†Œä¸è°ƒåº¦
  - é…ç½®åŠ è½½ä¸éªŒè¯
  - å¤šä¼šè¯å¹¶å‘ç®¡ç†
- **å…³é”®ç±»**:
  - `ChatEngine`: å¼•æ“ä¸»ç±»
  - `ChatSession`: å•ä¸ªä¼šè¯å®ä¾‹
  - `SessionContext`: ä¼šè¯ä¸Šä¸‹æ–‡ç®¡ç†
  - `HandlerManager`: Handlerç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨

#### 2. **Handler ç³»ç»Ÿ (å¤„ç†å™¨ä½“ç³»)**

Handler æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒæŠ½è±¡ï¼Œæ‰€æœ‰åŠŸèƒ½æ¨¡å—éƒ½å®ç°ä¸º Handlerã€‚ç³»ç»Ÿæ”¯æŒä»¥ä¸‹ç±»å‹çš„ Handlerï¼š

##### **Client Handler (å®¢æˆ·ç«¯å¤„ç†å™¨)**
- **RTC Client Handler**: åŸºäºWebRTCçš„æœåŠ¡ç«¯æ¸²æŸ“å®¢æˆ·ç«¯
  - ä½ç½®: `src/handlers/client/rtc_client/`
  - ç‰¹ç‚¹: æœåŠ¡ç«¯æ¸²æŸ“ï¼Œè§†é¢‘æµå®æ—¶ä¼ è¾“
  
- **LAM Client Handler**: åŸºäºH5çš„ç«¯ä¾§æ¸²æŸ“å®¢æˆ·ç«¯
  - ä½ç½®: `src/handlers/client/h5_rendering_client/`
  - ç‰¹ç‚¹: å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œæ”¯æŒå¤šè·¯å¹¶å‘ï¼ˆæœ€å¤§5è·¯ï¼‰
  - èµ„æº: Gaussian Splatting 3Dèµ„äº§

##### **VAD Handler (è¯­éŸ³æ´»åŠ¨æ£€æµ‹)**
- **Silero VAD Handler**
  - ä½ç½®: `src/handlers/vad/silerovad/`
  - æ¨¡å‹: Silero VAD
  - åŠŸèƒ½: å®æ—¶æ£€æµ‹è¯­éŸ³èµ·æ­¢ï¼Œå‡å°‘æ— æ•ˆéŸ³é¢‘ä¼ è¾“
  - å¯é…ç½®å‚æ•°:
    - `speaking_threshold`: è¯­éŸ³æ£€æµ‹é˜ˆå€¼ï¼ˆé»˜è®¤0.5ï¼‰
    - `start_delay`: èµ·å§‹å»¶è¿Ÿï¼ˆé»˜è®¤2048é‡‡æ ·ï¼‰
    - `end_delay`: ç»“æŸå»¶è¿Ÿï¼ˆé»˜è®¤5000é‡‡æ ·ï¼‰
    - `buffer_look_back`: å›æº¯ç¼“å†²ï¼ˆé»˜è®¤5000é‡‡æ ·ï¼‰

##### **ASR Handler (è¯­éŸ³è¯†åˆ«)**
- **SenseVoice Handler**
  - ä½ç½®: `src/handlers/asr/sensevoice/`
  - æ¨¡å‹: iic/SenseVoiceSmall
  - ç‰¹ç‚¹: æ”¯æŒä¸­è‹±æ–‡æ··åˆè¯†åˆ«ï¼Œä½å»¶è¿Ÿ
  - è¾“å…¥: 16kHz PCMéŸ³é¢‘æµ
  - è¾“å‡º: æ–‡æœ¬å†…å®¹

##### **LLM Handler (å¤§è¯­è¨€æ¨¡å‹)**

1. **OpenAI Compatible Handler**
   - ä½ç½®: `src/handlers/llm/openai_compatible/`
   - æ”¯æŒ: æ‰€æœ‰OpenAIå…¼å®¹API
   - ç¤ºä¾‹: Qwen-Plus, DeepSeek, Ollama, Gemini
   - ç‰¹ç‚¹: 
     - æµå¼è¾“å‡ºæ”¯æŒ
     - å¯¹è¯å†å²ç®¡ç†ï¼ˆå¯é…ç½®å†å²é•¿åº¦ï¼‰
     - æ”¯æŒè§†è§‰è¾“å…¥ï¼ˆmultimodalæ¨¡å‹ï¼‰

2. **MiniCPM-o Handler**
   - ä½ç½®: `src/handlers/llm/minicpm/`
   - ç‰¹ç‚¹: ç«¯åˆ°ç«¯å¤šæ¨¡æ€æ¨¡å‹ï¼ˆAudio-to-Audioï¼‰
   - æ˜¾å­˜éœ€æ±‚: 
     - å®Œæ•´ç‰ˆ: 20GB+
     - INT4é‡åŒ–ç‰ˆ: <10GB
   - æ”¯æŒ: éŸ³é¢‘è¾“å…¥ã€è§†é¢‘è¾“å…¥ï¼ˆå¯é€‰ï¼‰

3. **Qwen-Omni Handler**
   - ä½ç½®: `src/handlers/llm/qwen_omni/`
   - ç‰¹ç‚¹: ä½¿ç”¨é˜¿é‡Œäº‘ç™¾ç‚¼Qwen-Omni-Realtime API
   - æ¨¡å¼: Manualæ¨¡å¼ï¼ˆéœ€æœ¬åœ°VADï¼‰

4. **Dify Chatflow Handler**
   - ä½ç½®: `src/handlers/llm/dify/`
   - ç‰¹ç‚¹: é›†æˆDifyå·¥ä½œæµ
   - æ”¯æŒ: Chatflowåº”ç”¨ç±»å‹

##### **TTS Handler (è¯­éŸ³åˆæˆ)**

1. **CosyVoice (æœ¬åœ°æ¨ç†)**
   - ä½ç½®: `src/handlers/tts/cosyvoice/`
   - æ¨¡å‹: iic/CosyVoice-300M-SFT
   - ç‰¹ç‚¹: 
     - æ”¯æŒé¢„è®¾éŸ³è‰²ï¼ˆä¸­æ–‡å¥³/ç”·ï¼‰
     - æ”¯æŒéŸ³è‰²å…‹éš†ï¼ˆæä¾›å‚è€ƒéŸ³é¢‘ï¼‰
     - é‡‡æ ·ç‡: 24000Hz
   - æ³¨æ„: Windowséœ€é€šè¿‡Condaå®‰è£…pynini

2. **Bailian CosyVoice (API)**
   - ä½ç½®: `src/handlers/tts/bailian_tts/`
   - ç‰¹ç‚¹: äº‘ç«¯æ¨ç†ï¼Œé™ä½æœ¬åœ°ç®—åŠ›éœ€æ±‚
   - æ¨¡å‹: cosyvoice-v1
   - éœ€è¦: é˜¿é‡Œäº‘ç™¾ç‚¼API Key

3. **Edge TTS**
   - ä½ç½®: `src/handlers/tts/edgetts/`
   - ç‰¹ç‚¹: 
     - å¾®è½¯äº‘ç«¯TTS
     - æ— éœ€API Key
     - éŸ³è´¨ç•¥é€ŠäºCosyVoice
   - éŸ³è‰²: zh-CN-XiaoxiaoNeural ç­‰

##### **Avatar Handler (æ•°å­—äºº)**

1. **LiteAvatar Handler**
   - ä½ç½®: `src/handlers/avatar/liteavatar/`
   - ç±»å‹: 2Dæ•°å­—äºº
   - ç‰¹ç‚¹:
     - CPU/GPUåŒæ¨¡å¼æ¨ç†
     - å®˜æ–¹æä¾›100+å½¢è±¡èµ„æº
     - æ”¯æŒå¤šä¼šè¯å¹¶å‘ï¼ˆé…ç½®concurrent_liï¼‰
     - å®æ—¶æ¸²æŸ“: 25-30 FPS
   - æ˜¾å­˜å ç”¨: çº¦3GB/è·¯ï¼ˆGPUæ¨¡å¼ï¼‰
   - å½¢è±¡åº“: [LiteAvatarGallery](https://modelscope.cn/models/HumanAIGC-Engineering/LiteAvatarGallery)

2. **LAM Handler**
   - ä½ç½®: `src/handlers/avatar/lam/`
   - ç±»å‹: 3Dæ•°å­—äººï¼ˆGaussian Splattingï¼‰
   - ç‰¹ç‚¹:
     - è¶…å†™å®æ•ˆæœ
     - å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆé™ä½æœåŠ¡ç«¯å‹åŠ›ï¼‰
     - æ”¯æŒå¤šè·¯å¹¶å‘
     - å•å›¾ç”Ÿæˆ3Dèµ„äº§ï¼ˆéœ€LAMé¡¹ç›®è®­ç»ƒï¼‰
   - è®ºæ–‡: è¢«SIGGRAPH 2025æ¥æ”¶
   - ä¾èµ–æ¨¡å‹:
     - facebook/wav2vec2-base-960h
     - LAM_audio2exp

3. **MuseTalk Handler**
   - ä½ç½®: `src/handlers/avatar/musetalk/`
   - ç±»å‹: 2Dæ•°å­—äºº
   - ç‰ˆæœ¬: MuseTalk 1.5
   - ç‰¹ç‚¹:
     - æ”¯æŒè‡ªå®šä¹‰åº•ç‰ˆè§†é¢‘
     - ä»…æ”¯æŒGPUæ¨ç†
     - æ¨èå¸§ç‡: 20 FPS
     - batch_sizeå¯é…ç½®ï¼ˆæœ€å°ä¸º2ï¼‰
   - é¦–æ¬¡åŠ è½½éœ€ç”Ÿæˆavataræ•°æ®

---

## ğŸ”§ æŠ€æœ¯æ ˆè¯¦è§£

### ç¼–ç¨‹è¯­è¨€ä¸æ¡†æ¶
- **Python**: 3.11.7 ~ 3.11.11ï¼ˆæ ¸å¿ƒçº¦æŸï¼‰
- **å‰ç«¯æ¡†æ¶**: Vue 3 + TypeScript + Vite
- **Webæ¡†æ¶**: FastAPI + Gradio 5.9.1
- **å¼‚æ­¥æ¡†æ¶**: asyncio + aiohttp

### æ·±åº¦å­¦ä¹ æ¡†æ¶
- **PyTorch**: 2.8.0ï¼ˆCUDA 12.8ï¼‰
- **TorchVision**: åŒ¹é…PyTorchç‰ˆæœ¬
- **TorchAudio**: åŒ¹é…PyTorchç‰ˆæœ¬
- **ONNX Runtime**: GPUåŠ é€Ÿç‰ˆæœ¬

### éŸ³è§†é¢‘å¤„ç†
- **WebRTC**: aiortc 1.12.0
- **éŸ³é¢‘å¤„ç†**: librosa 0.10.2, soundfile 0.13.1
- **è§†é¢‘å¤„ç†**: OpenCV 4.11.0 (headless)

### ä¾èµ–ç®¡ç†
- **åŒ…ç®¡ç†å™¨**: UV (æ¨è) / pip
- **é¡¹ç›®ç»“æ„**: Monorepo + UV Workspace
- **é…ç½®ç®¡ç†**: Dynaconf 3.2.7 + PyYAML

### æ•°æ®éªŒè¯
- **Pydantic**: 2.10.6ï¼ˆé…ç½®æ¨¡å‹éªŒè¯ï¼‰

### éƒ¨ç½²æ–¹æ¡ˆ
- **å®¹å™¨åŒ–**: Docker + CUDA 12.8
- **WebæœåŠ¡**: Uvicorn 0.34.0
- **SSL/TLS**: æ”¯æŒè‡ªç­¾åè¯ä¹¦

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### 1. æ¨¡å—åŒ–è®¾è®¡

#### Handler æ’æ‹”æœºåˆ¶
- æ‰€æœ‰åŠŸèƒ½ç»„ä»¶å‡å®ç°ä¸ºç‹¬ç«‹Handler
- é€šè¿‡é…ç½®æ–‡ä»¶åŠ¨æ€åŠ è½½/ç¦ç”¨Handler
- Handleré—´é€šè¿‡æ ‡å‡†åŒ–æ¥å£é€šä¿¡
- æ”¯æŒè‡ªå®šä¹‰Handleræ‰©å±•

#### é…ç½®é©±åŠ¨
```yaml
# ç¤ºä¾‹é…ç½®ç»“æ„
default:
  chat_engine:
    handler_configs:
      SileroVad:
        enabled: true
        module: vad/silerovad/vad_handler_silero
      SenseVoice:
        enabled: true
        module: asr/sensevoice/asr_handler_sensevoice
```

### 2. å®æ—¶äº¤äº’èƒ½åŠ›

#### ä½å»¶è¿Ÿè®¾è®¡
- **ç«¯åˆ°ç«¯å»¶è¿Ÿ**: å¹³å‡2.2ç§’ï¼ˆæµ‹è¯•ç¯å¢ƒï¼ši9-13900KF + RTX 4090ï¼‰
- **å»¶è¿Ÿæ„æˆ**:
  - RTCåŒå‘ä¼ è¾“: ~100-200ms
  - VADæ£€æµ‹: ~200-500ms
  - ASRè¯†åˆ«: ~100-300ms
  - LLMæ¨ç†: ~500-1000ms
  - TTSåˆæˆ: ~200-500ms
  - Avataræ¸²æŸ“: ~300-500ms

#### æµå¼å¤„ç†
- LLMæµå¼è¾“å‡ºï¼ˆé€tokenç”Ÿæˆï¼‰
- TTSæµå¼åˆæˆï¼ˆè¾¹ç”Ÿæˆè¾¹æ’­æ”¾ï¼‰
- Avatarå®æ—¶é©±åŠ¨ï¼ˆéŸ³é¢‘é©±åŠ¨è¡¨æƒ…ï¼‰

### 3. å¤šæ¨¡æ€æ”¯æŒ

#### è¾“å…¥æ¨¡æ€
- **éŸ³é¢‘è¾“å…¥**: 16kHz PCMï¼Œå®æ—¶VADæ£€æµ‹
- **è§†é¢‘è¾“å…¥**: å¯é€‰ï¼Œç”¨äºè§†è§‰ç†è§£ï¼ˆMiniCPM-o, è§†è§‰LLMï¼‰
- **æ–‡æœ¬è¾“å…¥**: æ”¯æŒæ–‡æœ¬è¡¥å……è¾“å…¥

#### è¾“å‡ºæ¨¡æ€
- **æ–‡æœ¬è¾“å‡º**: LLMç”Ÿæˆå†…å®¹
- **éŸ³é¢‘è¾“å‡º**: TTSåˆæˆè¯­éŸ³
- **è§†é¢‘è¾“å‡º**: æ•°å­—äººè§†é¢‘æµ

### 4. ä¼šè¯ç®¡ç†

#### ä¼šè¯ç‰¹æ€§
- **å¤šä¼šè¯å¹¶å‘**: æ”¯æŒé…ç½®concurrent_li
- **ä¼šè¯éš”ç¦»**: æ¯ä¸ªä¼šè¯ç‹¬ç«‹ä¸Šä¸‹æ–‡
- **ä¼šè¯æŒä¹…åŒ–**: å¯¹è¯å†å²ç®¡ç†ï¼ˆå¯é…ç½®å†å²é•¿åº¦ï¼‰
- **ä¼šè¯è¶…æ—¶**: TTLæœºåˆ¶ï¼ˆé»˜è®¤900ç§’ï¼Œå¯é…ç½®ï¼‰

#### èµ„æºç®¡ç†
- åŠ¨æ€ä¼šè¯åˆ›å»º/é”€æ¯
- GPUæ˜¾å­˜æŒ‰éœ€åˆ†é…
- ä¼šè¯çº§åˆ«çš„èµ„æºéš”ç¦»

---

## ğŸ“Š é¢„ç½®é…ç½®æ¨¡å¼

é¡¹ç›®æä¾›7ç§é¢„ç½®é…ç½®ï¼Œæ¶µç›–ä¸åŒæ€§èƒ½å’ŒåŠŸèƒ½éœ€æ±‚ï¼š

### é…ç½®å¯¹æ¯”è¡¨

| é…ç½®åç§° | ASR | LLM | TTS | Avatar | æœ¬åœ°ç®—åŠ›éœ€æ±‚ | æ¨èåœºæ™¯ |
|---------|-----|-----|-----|--------|------------|---------|
| **chat_with_lam.yaml** | SenseVoice | API | API | LAM | æä½ï¼ˆä»…VAD+ASRï¼‰ | å¤šè·¯å¹¶å‘ã€äº‘ç«¯éƒ¨ç½² |
| **chat_with_qwen_omni.yaml** | Qwen-Omni | Qwen-Omni | Qwen-Omni | LiteAvatar | ä½ï¼ˆä»…Avatarï¼‰ | ç«¯åˆ°ç«¯è¯­éŸ³äº¤äº’ |
| **chat_with_minicpm.yaml** | MiniCPM-o | MiniCPM-o | MiniCPM-o | LiteAvatar | æé«˜ï¼ˆ20GB+æ˜¾å­˜ï¼‰ | æœ¬åœ°ç§æœ‰åŒ–éƒ¨ç½² |
| **chat_with_openai_compatible.yaml** | SenseVoice | API | CosyVoice | LiteAvatar | ä¸­ï¼ˆæœ¬åœ°TTSï¼‰ | å¹³è¡¡æ–¹æ¡ˆ |
| **chat_with_openai_compatible_edge_tts.yaml** | SenseVoice | API | EdgeTTS | LiteAvatar | ä¸­ä½ | æ— éœ€API Key |
| **chat_with_openai_compatible_bailian_cosyvoice.yaml** | SenseVoice | API | API | LiteAvatar | ä½ | ç”Ÿäº§æ¨èé…ç½® |
| **chat_with_openai_compatible_bailian_cosyvoice_musetalk.yaml** | SenseVoice | API | API | MuseTalk | ä¸­ | è‡ªå®šä¹‰å½¢è±¡éœ€æ±‚ |

### é…ç½®è¯¦è§£

#### 1. **chat_with_lam.yaml** (æœ€è½»é‡æ–¹æ¡ˆ)
```yaml
ä¼˜åŠ¿:
  - ä»…VADå’ŒASRåœ¨æœ¬åœ°è¿è¡Œ
  - LAMå®¢æˆ·ç«¯æ¸²æŸ“ï¼Œé™ä½æœåŠ¡ç«¯å‹åŠ›
  - æ”¯æŒ5è·¯å¹¶å‘ï¼ˆå¯é…ç½®ï¼‰
  - è¶…å†™å®3Dæ•ˆæœ
é€‚ç”¨åœºæ™¯:
  - ä¸€æœºå¤šè·¯éƒ¨ç½²
  - å¸¦å®½å……è¶³ç¯å¢ƒ
  - å¯¹ç”»è´¨è¦æ±‚é«˜
æ³¨æ„äº‹é¡¹:
  - éœ€è¦æå‰ç”ŸæˆLAMèµ„äº§
  - å®¢æˆ·ç«¯éœ€è¦WebGLæ”¯æŒ
```

#### 2. **chat_with_openai_compatible_bailian_cosyvoice.yaml** (ç”Ÿäº§æ¨è)
```yaml
ä¼˜åŠ¿:
  - LLMå’ŒTTSå‡ä½¿ç”¨äº‘ç«¯API
  - æœ¬åœ°ç®—åŠ›éœ€æ±‚ä½
  - ç¨³å®šå¯é 
  - æ”¯æŒ2è·¯å¹¶å‘
é€‚ç”¨åœºæ™¯:
  - ä¸­å°è§„æ¨¡éƒ¨ç½²
  - å¯¹æˆæœ¬æ•æ„Ÿ
  - å¿«é€Ÿä¸Šçº¿éœ€æ±‚
æ³¨æ„äº‹é¡¹:
  - éœ€è¦é˜¿é‡Œäº‘ç™¾ç‚¼API Key
  - ä¾èµ–ç½‘ç»œç¨³å®šæ€§
```

#### 3. **chat_with_minicpm.yaml** (å®Œå…¨æœ¬åœ°åŒ–)
```yaml
ä¼˜åŠ¿:
  - ç«¯åˆ°ç«¯æœ¬åœ°æ¨ç†
  - æ•°æ®å®Œå…¨ç§æœ‰
  - æ”¯æŒéŸ³é¢‘å’Œè§†é¢‘è¾“å…¥
é€‚ç”¨åœºæ™¯:
  - ç§æœ‰åŒ–éƒ¨ç½²éœ€æ±‚
  - å¯¹æ•°æ®å®‰å…¨è¦æ±‚é«˜
  - æœ‰å……è¶³GPUèµ„æº
æ³¨æ„äº‹é¡¹:
  - éœ€è¦20GB+æ˜¾å­˜ï¼ˆéé‡åŒ–ç‰ˆï¼‰
  - INT4é‡åŒ–ç‰ˆéœ€è¦ç‰¹æ®ŠAutoGPTQç‰ˆæœ¬
```

---

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šæœ¬åœ°è¿è¡Œï¼ˆæ¨èå¼€å‘ç¯å¢ƒï¼‰

#### ç¯å¢ƒè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux / Windows
- **Python**: 3.11.7 ~ 3.11.11
- **CUDA**: 12.4+ï¼ˆNVIDIAé©±åŠ¨æ”¯æŒçš„CUDAç‰ˆæœ¬ï¼‰
- **æ˜¾å­˜**: æ ¹æ®é…ç½®ï¼Œæœ€ä½2GBï¼Œæ¨è8GB+
- **CPU**: i7ä»¥ä¸Šï¼ˆCPUæ¨¡å¼Avataræ¨ç†éœ€è¦ï¼‰

#### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®ï¼ˆå¿…é¡»ä½¿ç”¨gitï¼Œä¸è¦ä¸‹è½½zipï¼‰
git clone https://github.com/HumanAIGC-Engineering/OpenAvatarChat.git
cd OpenAvatarChat

# 2. å®‰è£…git-lfsï¼ˆå›½å†…ç”¨æˆ·å¿…é¡»ï¼‰
sudo apt install git-lfs  # Linux
# Windowsç”¨æˆ·è®¿é—® https://git-lfs.github.com/

# 3. åˆå§‹åŒ–git-lfs
git lfs install

# 4. æ‹‰å–å­æ¨¡å—
git submodule update --init --recursive --depth 1

# 5. å®‰è£…uvï¼ˆåŒ…ç®¡ç†å™¨ï¼‰
# Linux/macOS:
curl -LsSf https://astral.sh/uv/install.sh | sh
# Windows:
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"

# 6. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv --python 3.11.11

# 7. å®‰è£…ä¾èµ–ï¼ˆæ–¹å¼ä¸€ï¼šå…¨éƒ¨ä¾èµ–ï¼‰
uv sync --all-packages

# æˆ–è€…ï¼ˆæ–¹å¼äºŒï¼šä»…å®‰è£…æŒ‡å®šé…ç½®çš„ä¾èµ–ï¼‰
uv pip install setuptools pip
uv run install.py --uv --config config/chat_with_openai_compatible_bailian_cosyvoice.yaml
./scripts/post_config_install.sh --config config/chat_with_openai_compatible_bailian_cosyvoice.yaml

# 8. ä¸‹è½½æ¨¡å‹ï¼ˆæ ¹æ®é€‰æ‹©çš„é…ç½®ï¼‰
# LiteAvataræ¨¡å‹
bash scripts/download_liteavatar_weights.sh

# LAMæ¨¡å‹
git clone --depth 1 https://www.modelscope.cn/AI-ModelScope/wav2vec2-base-960h.git ./models/wav2vec2-base-960h
wget https://virutalbuy-public.oss-cn-hangzhou.aliyuncs.com/share/aigc3d/data/LAM/LAM_audio2exp_streaming.tar -P ./models/LAM_audio2exp/
tar -xzvf ./models/LAM_audio2exp/LAM_audio2exp_streaming.tar -C ./models/LAM_audio2exp

# MuseTalkæ¨¡å‹
bash scripts/download_musetalk_weights.sh

# 9. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœä½¿ç”¨APIï¼‰
echo "DASHSCOPE_API_KEY=sk-your-api-key" > .env

# 10. ç”ŸæˆSSLè¯ä¹¦ï¼ˆélocalhostè®¿é—®å¿…éœ€ï¼‰
bash scripts/create_ssl_certs.sh

# 11. è¿è¡Œ
uv run src/demo.py --config config/chat_with_openai_compatible_bailian_cosyvoice.yaml
```

#### Windowsä¸‹CosyVoiceç‰¹æ®Šå¤„ç†
```bash
# Windowsç”¨æˆ·éœ€è¦ä½¿ç”¨Conda + UVç»„åˆæ–¹å¼
conda create -n openavatarchat python=3.11
conda activate openavatarchat
conda install -c conda-forge pynini==2.1.6

# è®¾ç½®ç¯å¢ƒå˜é‡
set VIRTUAL_ENV=%CONDA_PREFIX%  # cmd
$env:VIRTUAL_ENV=$env:CONDA_PREFIX  # powershell

# å®‰è£…ä¾èµ–
uv sync --active --all-packages

# è¿è¡Œ
uv run --active src/demo.py --config config/chat_with_openai_compatible.yaml
```

### æ–¹æ¡ˆäºŒï¼šDockeréƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

#### ç¯å¢ƒè¦æ±‚
- Docker + NVIDIA Container Toolkit
- NVIDIAé©±åŠ¨: æ”¯æŒCUDA 12.8+

#### éƒ¨ç½²æ­¥éª¤ï¼ˆCUDA 12.8 for RTX 50ç³»åˆ—ï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/HumanAIGC-Engineering/OpenAvatarChat.git
cd OpenAvatarChat

# 2. ä¸‹è½½å­æ¨¡å—
git submodule update --init --recursive --depth 1

# 3. ä¸‹è½½æ‰€æœ‰æ¨¡å‹
bash scripts/download_liteavatar_weights.sh
bash scripts/download_musetalk_weights.sh

# LAMæ¨¡å‹
git clone --depth 1 https://www.modelscope.cn/AI-ModelScope/wav2vec2-base-960h.git ./models/wav2vec2-base-960h
wget https://virutalbuy-public.oss-cn-hangzhou.aliyuncs.com/share/aigc3d/data/LAM/LAM_audio2exp_streaming.tar -P ./models/LAM_audio2exp/
tar -xzvf ./models/LAM_audio2exp/LAM_audio2exp_streaming.tar -C ./models/LAM_audio2exp

# 4. é…ç½®ç¯å¢ƒå˜é‡
echo "DASHSCOPE_API_KEY=sk-your-api-key" > .env

# 5. æ„å»ºé•œåƒ
bash build_cuda128.sh

# 6. è¿è¡Œå®¹å™¨
bash run_docker_cuda128.sh --config config/chat_with_openai_compatible_bailian_cosyvoice_musetalk.yaml
```

#### æ—§ç‰ˆDockeréƒ¨ç½²ï¼ˆCUDA 12.4ï¼‰
```bash
./build_and_run.sh --config config/chat_with_openai_compatible.yaml
```

---

## ğŸŒ ç½‘ç»œéƒ¨ç½²é…ç½®

### éƒ¨ç½²åœºæ™¯åˆ†ç±»

#### 1. æœ¬åœ°è®¿é—®ï¼ˆlocalhostï¼‰
```yaml
æ— éœ€ç‰¹æ®Šé…ç½®
è®¿é—®åœ°å€: https://localhost:8282
```

#### 2. å±€åŸŸç½‘è®¿é—®ï¼ˆå¿…éœ€SSLï¼‰
```bash
# ç”Ÿæˆè‡ªç­¾åè¯ä¹¦
bash scripts/create_ssl_certs.sh

# é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¯ä¹¦
service:
  cert_file: "ssl_certs/localhost.crt"
  cert_key: "ssl_certs/localhost.key"

# è®¿é—®åœ°å€: https://<å±€åŸŸç½‘IP>:8282
# æ³¨æ„: æµè§ˆå™¨ä¼šæç¤ºä¸å®‰å…¨ï¼Œéœ€è¦æ‰‹åŠ¨ä¿¡ä»»è¯ä¹¦
```

#### 3. å…¬ç½‘è®¿é—®ï¼ˆå¿…éœ€SSL + TURNï¼‰

##### SSLè¯ä¹¦é…ç½®
```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨Let's Encryptï¼ˆæ¨èï¼‰
# éœ€è¦åŸŸåå’Œå…¬ç½‘IP
sudo apt install certbot
certbot certonly --standalone -d yourdomain.com

# é…ç½®æ–‡ä»¶
service:
  cert_file: "/etc/letsencrypt/live/yourdomain.com/fullchain.pem"
  cert_key: "/etc/letsencrypt/live/yourdomain.com/privkey.pem"

# æ–¹å¼äºŒï¼šè´­ä¹°å•†ä¸šè¯ä¹¦
# å°†è¯ä¹¦æ–‡ä»¶æ”¾åˆ°ssl_certsç›®å½•
```

##### TURN Serveré…ç½®ï¼ˆNATç©¿é€ï¼‰
```bash
# 1. å®‰è£…coturn
chmod 777 scripts/setup_coturn.sh
sudo scripts/setup_coturn.sh

# 2. ä¿®æ”¹é…ç½®æ–‡ä»¶
default:
  chat_engine:
    handler_configs:
      RtcClient:  # æˆ– LamClient
        turn_config:
          turn_provider: "turn_server"
          urls: 
            - "turn:your-domain.com:3478"
            - "turns:your-domain.com:5349"
          username: "your-username"
          credential: "your-password"

# 3. å¼€æ”¾é˜²ç«å¢™ç«¯å£
# TCP/UDP 3478, 5349
# UDP 49152-65535ï¼ˆRTPç«¯å£èŒƒå›´ï¼‰
```

### ç½‘ç»œé—®é¢˜æ’æŸ¥

#### ç—‡çŠ¶ï¼šç‚¹å‡»"å¼€å§‹å¯¹è¯"åä¸€ç›´ç­‰å¾…
**åŸå› **: NATç©¿é€å¤±è´¥ï¼ŒWebRTCæ— æ³•å»ºç«‹è¿æ¥

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥TURNæœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. ç¡®è®¤é˜²ç«å¢™ç«¯å£å·²å¼€æ”¾
3. éªŒè¯TURNé…ç½®æ˜¯å¦æ­£ç¡®
4. æ£€æŸ¥å®¢æˆ·ç«¯ç½‘ç»œç±»å‹ï¼ˆå¯¹ç§°NATéœ€è¦TURNï¼‰

#### ç—‡çŠ¶ï¼šæ— æ³•è®¿é—®æ‘„åƒå¤´/éº¦å…‹é£
**åŸå› **: æµè§ˆå™¨å®‰å…¨ç­–ç•¥é™åˆ¶ï¼ˆéHTTPSï¼‰

**è§£å†³æ–¹æ¡ˆ**:
1. æœ¬åœ°è®¿é—®ä½¿ç”¨localhostï¼ˆè‡ªåŠ¨å…è®¸ï¼‰
2. å±€åŸŸç½‘/å…¬ç½‘è®¿é—®å¿…é¡»ä½¿ç”¨HTTPS
3. é…ç½®æœ‰æ•ˆçš„SSLè¯ä¹¦
4. æ‰‹åŠ¨æˆæƒæµè§ˆå™¨æƒé™

---

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. GPUæ˜¾å­˜ä¼˜åŒ–

#### æ˜¾å­˜åˆ†é…ç­–ç•¥
```python
# LiteAvatar: ~3GB/è·¯
# MuseTalk: ~4GB/è·¯
# CosyVoice: ~2GB
# MiniCPM-o: 20GBï¼ˆå®Œæ•´ç‰ˆï¼‰/ 8GBï¼ˆINT4ï¼‰

# é…ç½®ç¤ºä¾‹ï¼ˆ12GBæ˜¾å¡ï¼‰
concurrent_li: 2  # LiteAvataråŒè·¯
# æˆ–
concurrent_li: 1  # MuseTalkå•è·¯
```

#### æ¨¡å‹é‡åŒ–
```bash
# MiniCPM-o INT4é‡åŒ–
# ä¸‹è½½é‡åŒ–ç‰ˆæœ¬
scripts/download_MiniCPM-o_2.6-int4.sh

# å®‰è£…ç‰¹æ®ŠAutoGPTQ
# å‚è€ƒ: https://modelscope.cn/models/OpenBMB/MiniCPM-o-2_6-int4
```

### 2. å»¶è¿Ÿä¼˜åŒ–

#### LiteAvatarå¿«é€Ÿæ¨¡å¼
```yaml
LiteAvatar:
  enable_fast_mode: true  # å¼€å¯ä½å»¶è¿Ÿæ¨¡å¼
  # æ³¨æ„: å¯èƒ½å¯¼è‡´å¼€å§‹æ—¶è¯­éŸ³å¡é¡¿
```

#### VADå‚æ•°è°ƒä¼˜
```yaml
SileroVad:
  end_delay: 3000  # é™ä½ç»“æŸå»¶è¿Ÿï¼ˆé»˜è®¤5000ï¼‰
  # æƒè¡¡: å»¶è¿Ÿ vs æˆªæ–­é£é™©
```

#### LLMæµå¼è¾“å‡º
```yaml
LLMOpenAICompatible:
  # è‡ªåŠ¨å¯ç”¨æµå¼è¾“å‡º
  # é¦–tokenå»¶è¿Ÿ: 500-1000ms
```

### 3. å¹¶å‘ä¼˜åŒ–

#### LiteAvatarå¤šä¼šè¯
```yaml
default:
  chat_engine:
    concurrent_li: 3  # æœ€å¤§3è·¯å¹¶å‘
    
LiteAvatar:
  use_gpu: true  # GPUæ¨¡å¼
  # æ˜¾å­˜éœ€æ±‚: 3GB * 3 = 9GB
```

#### LAMé«˜å¹¶å‘æ–¹æ¡ˆ
```yaml
LamClient:
  concurrent_li: 5  # å®¢æˆ·ç«¯æ¸²æŸ“ï¼ŒæœåŠ¡ç«¯å‹åŠ›å°
```

---

## ğŸ“ˆ æ€§èƒ½åŸºå‡†æµ‹è¯•

### æµ‹è¯•ç¯å¢ƒ
- **CPU**: Intel i9-13900KF
- **GPU**: NVIDIA RTX 4090 (24GB)
- **RAM**: 32GB DDR5
- **ç½‘ç»œ**: åƒå…†å±€åŸŸç½‘

### å»¶è¿Ÿæµ‹è¯•ï¼ˆchat_with_openai_compatible_bailian_cosyvoice.yamlï¼‰

| é˜¶æ®µ | å¹³å‡å»¶è¿Ÿ | å¤‡æ³¨ |
|-----|---------|------|
| VADæ£€æµ‹ | 200ms | end_delay=5000æ—¶ |
| ASRè¯†åˆ« | 150ms | SenseVoice |
| LLMæ¨ç† | 800ms | Qwen-Plus, é¦–token |
| TTSåˆæˆ | 300ms | ç™¾ç‚¼CosyVoice |
| Avataræ¸²æŸ“ | 100ms | LiteAvatar GPUæ¨¡å¼ |
| RTCä¼ è¾“ | 50ms | å±€åŸŸç½‘ |
| **æ€»è®¡** | **~2.2s** | ç«¯åˆ°ç«¯ï¼ˆ10æ¬¡å¹³å‡ï¼‰ |

### å¸§ç‡æµ‹è¯•

| Avatarç±»å‹ | GPUæ¨¡å¼ | CPUæ¨¡å¼ | å¤‡æ³¨ |
|-----------|--------|---------|------|
| LiteAvatar | 30 FPS | 25-30 FPS | i9-13980HX CPU |
| LAM | 60 FPS | N/A | å®¢æˆ·ç«¯æ¸²æŸ“ |
| MuseTalk | 20 FPS | ä¸æ”¯æŒ | batch_size=2 |

### å¹¶å‘æµ‹è¯•ï¼ˆLiteAvatarï¼‰

| å¹¶å‘è·¯æ•° | GPUæ˜¾å­˜å ç”¨ | å•è·¯å»¶è¿Ÿå¢å¹… | å¤‡æ³¨ |
|---------|-----------|------------|------|
| 1è·¯ | 3GB | åŸºå‡† | - |
| 2è·¯ | 6GB | +5% | - |
| 3è·¯ | 9GB | +10% | - |
| 4è·¯ | 12GB | +20% | å¼€å§‹å‡ºç°æ’é˜Ÿ |
| 5è·¯ | 15GB | +40% | ä¸æ¨è |

---

## ğŸ”§ é…ç½®å‚æ•°è¯¦è§£

### å…¨å±€é…ç½®

```yaml
default:
  logger:
    log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR
    
  service:
    host: "0.0.0.0"  # ç›‘å¬åœ°å€
    port: 8282       # ç›‘å¬ç«¯å£
    cert_file: "ssl_certs/localhost.crt"  # SSLè¯ä¹¦
    cert_key: "ssl_certs/localhost.key"   # SSLç§é’¥
    
  chat_engine:
    model_root: "models"  # æ¨¡å‹æ ¹ç›®å½•ï¼ˆç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„ï¼‰
    concurrent_li: 1   # æœ€å¤§å¹¶å‘ä¼šè¯æ•°
    handler_search_path:
      - "src/handlers"    # Handleræœç´¢è·¯å¾„
```

### Handleré€šç”¨å‚æ•°

```yaml
handler_configs:
  HandlerName:
    enabled: true           # æ˜¯å¦å¯ç”¨ï¼ˆé»˜è®¤trueï¼‰
    module: "path/to/handler"  # Handleræ¨¡å—è·¯å¾„
    # ... å…¶ä»–Handlerç‰¹å®šå‚æ•°
```

### VADé…ç½®ï¼ˆSileroVadï¼‰

```yaml
SileroVad:
  speaking_threshold: 0.5   # è¯­éŸ³æ¦‚ç‡é˜ˆå€¼ï¼ˆ0-1ï¼‰
  start_delay: 2048         # èµ·å§‹å»¶è¿Ÿï¼ˆé‡‡æ ·æ•°ï¼Œ16kHzï¼‰
  end_delay: 5000           # ç»“æŸå»¶è¿Ÿï¼ˆé‡‡æ ·æ•°ï¼‰
  buffer_look_back: 5000    # å›æº¯ç¼“å†²ï¼ˆé‡‡æ ·æ•°ï¼‰
  speech_padding: 512       # å¡«å……é™éŸ³ï¼ˆé‡‡æ ·æ•°ï¼‰
```

**å‚æ•°å½±å“**:
- `speaking_threshold` â†‘ â†’ æ›´å°‘è¯¯è§¦å‘ï¼Œä½†å¯èƒ½æ¼æ£€
- `end_delay` â†“ â†’ å“åº”æ›´å¿«ï¼Œä½†å¯èƒ½æˆªæ–­
- `buffer_look_back` â†‘ â†’ æ›´å®Œæ•´èµ·å§‹éŸ³ï¼Œä½†å¢åŠ å»¶è¿Ÿ

### ASRé…ç½®ï¼ˆSenseVoiceï¼‰

```yaml
SenseVoice:
  model_name: "iic/SenseVoiceSmall"  # æ¨¡å‹åç§°æˆ–æœ¬åœ°è·¯å¾„
  # è‡ªåŠ¨ä»ModelScopeä¸‹è½½
```

### LLMé…ç½®ï¼ˆOpenAI Compatibleï¼‰

```yaml
LLMOpenAICompatible:
  model_name: "qwen-plus"  # æ¨¡å‹ID
  api_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
  api_key: ""  # ç•™ç©ºåˆ™ä»ç¯å¢ƒå˜é‡DASHSCOPE_API_KEYè¯»å–
  
  system_prompt: "ä½ æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹..."  # ç³»ç»Ÿæç¤ºè¯
  history_length: 20  # å¯¹è¯å†å²ä¿ç•™æ¡æ•°
  enable_video_input: false  # æ˜¯å¦å¯ç”¨è§†é¢‘è¾“å…¥
```

**æ”¯æŒçš„APIæä¾›å•†**:
- é˜¿é‡Œäº‘ç™¾ç‚¼: `https://dashscope.aliyuncs.com/compatible-mode/v1`
- Ollamaæœ¬åœ°: `http://127.0.0.1:11434/v1`
- Google Gemini: `https://generativelanguage.googleapis.com/v1beta/openai/`
- DeepSeek: `https://api.deepseek.com`

### LLMé…ç½®ï¼ˆMiniCPM-oï¼‰

```yaml
S2S_MiniCPM:
  model_name: "MiniCPM-o-2_6"  # æˆ– "MiniCPM-o-2_6-int4"
  voice_prompt: ""             # è¯­éŸ³æç¤º
  assistant_prompt: ""         # åŠ©æ‰‹æç¤º
  enable_video_input: false    # è§†é¢‘è¾“å…¥ï¼ˆæ³¨æ„æ˜¾å­˜ï¼‰
  skip_video_frame: -1         # è·³å¸§ç­–ç•¥
    # -1: æ¯ç§’æœ€åä¸€å¸§
    #  0: æ‰€æœ‰å¸§
    # >0: æ¯nå¸§é‡‡æ ·ä¸€æ¬¡
```

### TTSé…ç½®ï¼ˆCosyVoiceæœ¬åœ°ï¼‰

```yaml
TTS_CosyVoice:
  model_name: "iic/CosyVoice-300M-SFT"  # æ¨¡å‹è·¯å¾„
  api_url: ""  # ç•™ç©ºè¡¨ç¤ºæœ¬åœ°æ¨ç†
  
  # æ–¹å¼ä¸€ï¼šä½¿ç”¨é¢„è®¾éŸ³è‰²
  spk_id: "ä¸­æ–‡å¥³"  # ä¸­æ–‡å¥³ã€ä¸­æ–‡ç”·ã€è‹±æ–‡å¥³ã€è‹±æ–‡ç”·ç­‰
  
  # æ–¹å¼äºŒï¼šéŸ³è‰²å…‹éš†ï¼ˆä¸spk_idäº’æ–¥ï¼‰
  ref_audio_path: "/path/to/reference.wav"
  ref_audio_text: "å‚è€ƒéŸ³é¢‘çš„æ–‡æœ¬å†…å®¹"
  
  sample_rate: 24000  # è¾“å‡ºé‡‡æ ·ç‡
```

### TTSé…ç½®ï¼ˆç™¾ç‚¼CosyVoiceï¼‰

```yaml
CosyVoice:
  module: tts/bailian_tts/tts_handler_cosyvoice_bailian
  voice: "longxiaochun"  # éŸ³è‰²ID
  model_name: "cosyvoice-v1"
  api_key: ""  # ä»ç¯å¢ƒå˜é‡è¯»å–
```

### TTSé…ç½®ï¼ˆEdge TTSï¼‰

```yaml
Edge_TTS:
  voice: "zh-CN-XiaoxiaoNeural"  # éŸ³è‰²ID
  # æ›´å¤šéŸ³è‰²å‚è€ƒ: https://speech.microsoft.com/portal/voicegallery
```

### Avataré…ç½®ï¼ˆLiteAvatarï¼‰

```yaml
LiteAvatar:
  avatar_name: "20250408/sample_data"  # å½¢è±¡åç§°
    # å¯ä»LiteAvatarGalleryä¸‹è½½: https://modelscope.cn/models/HumanAIGC-Engineering/LiteAvatarGallery
  fps: 25                    # ç›®æ ‡å¸§ç‡
  use_gpu: true              # æ˜¯å¦ä½¿ç”¨GPU
  enable_fast_mode: false    # ä½å»¶è¿Ÿæ¨¡å¼
  debug: false               # è°ƒè¯•æ¨¡å¼
```

### Avataré…ç½®ï¼ˆLAMï¼‰

```yaml
Avatar_LAM:
  module: avatar/lam/avatar_handler_lam_audio2expression
  # é©±åŠ¨æ¨¡å‹è‡ªåŠ¨ä»é…ç½®çš„æ¨¡å‹è·¯å¾„åŠ è½½
```

```yaml
LamClient:
  module: client/h5_rendering_client/client_handler_lam
  asset_path: "lam_samples/barbara.zip"  # LAMèµ„äº§è·¯å¾„
    # å†…ç½®èµ„äº§: barbara.zip, james.zip, status.zip, vfhq_case1.zip
  concurrent_li: 5  # æœ€å¤§å¹¶å‘è¿æ¥æ•°
```

### Avataré…ç½®ï¼ˆMuseTalkï¼‰

```yaml
Avatar_MuseTalk:
  fps: 20  # æ¨èå¸§ç‡
  batch_size: 2  # æ‰¹å¤„ç†å¤§å°ï¼ˆæœ€å°2ï¼‰
  avatar_video_path: "src/handlers/avatar/musetalk/MuseTalk/data/video/sun.mp4"
    # åº•ç‰ˆè§†é¢‘è·¯å¾„ï¼Œæ”¯æŒè‡ªå®šä¹‰
  avatar_model_dir: "models/musetalk/avatar_model"  # ç¼“å­˜ç›®å½•
  force_create_avatar: false  # å¼ºåˆ¶é‡æ–°ç”Ÿæˆ
  debug: false
```

### Clienté…ç½®ï¼ˆRTCï¼‰

```yaml
RtcClient:
  connection_ttl: 900  # ä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  
  # TURNé…ç½®ï¼ˆå¯é€‰ï¼Œå…¬ç½‘éƒ¨ç½²éœ€è¦ï¼‰
  turn_config:
    turn_provider: "turn_server"
    urls:
      - "turn:your-domain.com:3478"
      - "turns:your-domain.com:5349"
    username: "turnuser"
    credential: "turnpassword"
```

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
OpenAvatarChat/
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ chat_with_*.yaml       # å„ç§é¢„ç½®é…ç½®
â”œâ”€â”€ src/                       # æºä»£ç 
â”‚   â”œâ”€â”€ chat_engine/           # æ ¸å¿ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ chat_engine.py     # ä¸»å¼•æ“ç±»
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/          # ä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ data_models/       # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ handlers/              # Handlerå®ç°
â”‚   â”‚   â”œâ”€â”€ vad/               # VADå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ asr/               # ASRå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ llm/               # LLMå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ tts/               # TTSå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ avatar/            # Avatarå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ client/            # Clientå¤„ç†å™¨
â”‚   â”œâ”€â”€ engine_utils/          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ service/               # WebæœåŠ¡
â”‚   â”œâ”€â”€ third_party/           # ç¬¬ä¸‰æ–¹åº“
â”‚   â”‚   â”œâ”€â”€ gradio_webrtc_videochat/  # WebRTCå‰ç«¯
â”œâ”€â”€ models/                    # æ¨¡å‹å­˜å‚¨ç›®å½•
â”œâ”€â”€ resource/                  # èµ„æºæ–‡ä»¶
â”œâ”€â”€ scripts/                   # è„šæœ¬å·¥å…·
â”œâ”€â”€ tests/                     # æµ‹è¯•ä»£ç 
â”œâ”€â”€ pyproject.toml             # é¡¹ç›®é…ç½®
â”œâ”€â”€ install.py                 # å®‰è£…è„šæœ¬
â””â”€â”€ README.md                  # é¡¹ç›®æ–‡æ¡£
```

### è‡ªå®šä¹‰Handlerå¼€å‘

#### 1. HandleråŸºç±»

æ‰€æœ‰Handlerç»§æ‰¿è‡ªåŸºç±»ï¼ˆä½äº`chat_engine/common/handler_base.py`ï¼‰ï¼š

```python
from chat_engine.common.handler_base import HandlerBase

class MyHandler(HandlerBase):
    def initialize(self, config):
        """åˆå§‹åŒ–Handlerï¼ˆåŠ è½½æ¨¡å‹ç­‰ï¼‰"""
        pass
    
    def create_context(self, session_context):
        """ä¸ºæ¯ä¸ªä¼šè¯åˆ›å»ºä¸Šä¸‹æ–‡"""
        return MyHandlerContext()
    
    def create_data_sink(self, handler_context):
        """åˆ›å»ºæ•°æ®å¤„ç†ç®¡é“"""
        return MyDataSink(handler_context)
    
    def destroy(self):
        """æ¸…ç†èµ„æº"""
        pass
```

#### 2. Handleræ³¨å†Œ

åœ¨Handleræ¨¡å—çš„`pyproject.toml`ä¸­å£°æ˜ä¾èµ–ï¼š

```toml
[project]
name = "my-handler"
dependencies = [
    "numpy",
    # ... å…¶ä»–ä¾èµ–
]
```

åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨ï¼š

```yaml
handler_configs:
  MyHandler:
    enabled: true
    module: "path/to/my_handler"
    # ... è‡ªå®šä¹‰å‚æ•°
```

#### 3. æ•°æ®æµå¤„ç†

Handleré€šè¿‡Queueè¿›è¡Œæ•°æ®äº¤æ¢ï¼š

```python
class MyDataSink:
    async def process(self):
        while True:
            # ä»ä¸Šæ¸¸è·å–æ•°æ®
            data = await self.input_queue.get()
            
            # å¤„ç†æ•°æ®
            result = self.my_processing(data)
            
            # è¾“å‡ºåˆ°ä¸‹æ¸¸
            await self.output_queue.put(result)
```

### å‰ç«¯å®šåˆ¶å¼€å‘

å‰ç«¯ä»£ç ä½äº: `src/handlers/client/rtc_client/frontend/`

#### æŠ€æœ¯æ ˆ
- Vue 3 + TypeScript
- Vite æ„å»ºå·¥å…·
- WebRTC API

#### æ„å»ºå‰ç«¯
```bash
cd src/handlers/client/rtc_client/frontend/
pnpm install
pnpm build  # è¾“å‡ºåˆ° dist/
```

#### ç‹¬ç«‹å‰ç«¯ä»“åº“
å®˜æ–¹æä¾›ç‹¬ç«‹å‰ç«¯ä»“åº“: [OpenAvatarChat-WebUI](https://github.com/HumanAIGC-Engineering/OpenAvatarChat-WebUI)

### è°ƒè¯•æŠ€å·§

#### 1. å¼€å¯è°ƒè¯•æ—¥å¿—
```yaml
logger:
  log_level: "DEBUG"
```

#### 2. Handlerè°ƒè¯•æ¨¡å¼
```yaml
LiteAvatar:
  debug: true  # è¾“å‡ºè¯¦ç»†è°ƒè¯•ä¿¡æ¯
```

#### 3. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
```bash
tail -f logs/log.log
```

#### 4. æ€§èƒ½åˆ†æ
```python
# åœ¨ä»£ç ä¸­æ·»åŠ 
from loguru import logger
import time

start = time.time()
# ... ä»£ç å—
logger.info(f"Processing time: {time.time() - start:.3f}s")
```

---

## ğŸ› å¸¸è§é—®é¢˜ä¸è§£å†³

### å®‰è£…é—®é¢˜

#### Q1: git submoduleæ‹‰å–å¤±è´¥
**ç—‡çŠ¶**: `fastrtc-0.0.28.dev0-py3-none-any.whl not found`

**è§£å†³**:
```bash
# é‡æ–°æ‹‰å–å­æ¨¡å—
git submodule update --init --recursive --depth 1

# æ£€æŸ¥å­æ¨¡å—çŠ¶æ€
git submodule status

# å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œæ‰‹åŠ¨å…‹éš†
cd src/third_party/
git clone https://github.com/HumanAIGC-Engineering/gradio-webrtc.git gradio_webrtc_videochat
```

#### Q2: onnxruntime-gpuå®‰è£…å¤±è´¥
**è§£å†³**:
```bash
# æ£€æŸ¥CUDAç‰ˆæœ¬
nvidia-smi

# å®‰è£…å¯¹åº”ç‰ˆæœ¬
pip install onnxruntime-gpu --extra-index-url https://aiinfra.pkgs.visualstudio.com/PublicPackages/_packaging/onnxruntime-cuda-12/pypi/simple/
```

#### Q3: Windowsä¸‹'gbk'ç¼–ç é”™è¯¯
**è§£å†³**:
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
set PYTHONUTF8=1  # cmd
$env:PYTHONUTF8=1  # powershell

# æˆ–åœ¨Pythonä»£ç ä¸­
import os
os.environ['PYTHONUTF8'] = '1'
```

### è¿è¡Œé—®é¢˜

#### Q4: ç‚¹å‡»"å¼€å§‹å¯¹è¯"åä¸€ç›´ç­‰å¾…
**åŸå› **: NATç©¿é€å¤±è´¥

**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥æ˜¯å¦åœ¨å…¬ç½‘ç¯å¢ƒï¼ˆéœ€è¦TURNï¼‰
2. éªŒè¯TURNé…ç½®æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥é˜²ç«å¢™ç«¯å£æ˜¯å¦å¼€æ”¾
4. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°WebRTCè¿æ¥çŠ¶æ€

**è§£å†³**:
```bash
# å®‰è£…TURNæœåŠ¡å™¨
bash scripts/setup_coturn.sh

# æ£€æŸ¥coturnçŠ¶æ€
systemctl status coturn

# æµ‹è¯•TURNè¿æ¥
# ä½¿ç”¨ https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/
```

#### Q5: ä¼šè¯æ„å¤–åœæ­¢ï¼Œæ— é”™è¯¯æ—¥å¿—
**åŸå› **: ä¼šè¯TTLè¶…æ—¶ï¼ˆé»˜è®¤900ç§’ï¼‰

**è§£å†³**:
```yaml
RtcClient:
  connection_ttl: 3600  # å»¶é•¿åˆ°1å°æ—¶
```

#### Q6: æ˜¾å­˜ä¸è¶³ï¼ˆOOMï¼‰
**ç—‡çŠ¶**: `CUDA out of memory`

**è§£å†³**:
```yaml
# æ–¹æ¡ˆä¸€ï¼šå‡å°‘å¹¶å‘æ•°
concurrent_li: 1

# æ–¹æ¡ˆäºŒï¼šä½¿ç”¨CPUæ¨ç†
LiteAvatar:
  use_gpu: false

# æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨é‡åŒ–æ¨¡å‹
S2S_MiniCPM:
  model_name: "MiniCPM-o-2_6-int4"

# æ–¹æ¡ˆå››ï¼šä½¿ç”¨APIä»£æ›¿æœ¬åœ°æ¨ç†
LLMOpenAICompatible:  # æ›¿ä»£æœ¬åœ°LLM
CosyVoice:
  module: tts/bailian_tts/tts_handler_cosyvoice_bailian  # API TTS
```

### æ€§èƒ½é—®é¢˜

#### Q7: è¯­éŸ³è¯†åˆ«ä¸å‡†ç¡®
**è§£å†³**:
1. ç¡®ä¿ç¯å¢ƒå®‰é™ï¼Œéº¦å…‹é£è´¨é‡å¥½
2. è°ƒæ•´VADé˜ˆå€¼ï¼š
```yaml
SileroVad:
  speaking_threshold: 0.3  # é™ä½é˜ˆå€¼ï¼Œæ›´çµæ•
```
3. å°è¯•ä¸åŒçš„ASRæ¨¡å‹

#### Q8: Avataræ¸²æŸ“å¡é¡¿
**ç—‡çŠ¶**: æ—¥å¿—å‡ºç°`[IDLE_FRAME] Inserted idle during speaking`

**è§£å†³**:
```yaml
# MuseTalk: é™ä½FPS
Avatar_MuseTalk:
  fps: 15  # ä»20é™ä½åˆ°15

# LiteAvatar: ä½¿ç”¨GPU
LiteAvatar:
  use_gpu: true
  fps: 25
```

#### Q9: TTSå»¶è¿Ÿé«˜
**è§£å†³**:
```yaml
# æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨API TTS
CosyVoice:
  module: tts/bailian_tts/tts_handler_cosyvoice_bailian

# æ–¹æ¡ˆäºŒï¼šä½¿ç”¨Edge TTS
Edge_TTS:
  module: tts/edgetts/tts_handler_edgetts
```

---

## ğŸ¨ åº”ç”¨åœºæ™¯

### 1. å®¢æœåŠ©æ‰‹
- **é…ç½®**: chat_with_openai_compatible_bailian_cosyvoice.yaml
- **ä¼˜åŠ¿**: 
  - äº‘ç«¯LLMå¯æ¥å…¥çŸ¥è¯†åº“
  - 7x24å°æ—¶ä¸é—´æ–­
  - å¤šè·¯å¹¶å‘ï¼Œé™ä½ç­‰å¾…æ—¶é—´
- **é€‚ç”¨è¡Œä¸š**: ç”µå•†ã€é‡‘èã€æ”¿åŠ¡

### 2. æ•™è‚²åŸ¹è®­
- **é…ç½®**: chat_with_minicpm.yaml
- **ä¼˜åŠ¿**:
  - æœ¬åœ°éƒ¨ç½²ï¼Œä¿æŠ¤å­¦ç”Ÿéšç§
  - æ”¯æŒè§†è§‰è¾“å…¥ï¼Œå¯è¯†åˆ«æ‰‹åŠ¿ã€å›¾ç‰‡
  - å¤šæ¨¡æ€äº¤äº’ï¼Œå¢å¼ºæ•™å­¦æ•ˆæœ
- **åº”ç”¨**: è¯­è¨€å­¦ä¹ ã€ç¼–ç¨‹æ•™å­¦

### 3. åŒ»ç–—å’¨è¯¢
- **é…ç½®**: chat_with_openai_compatible_bailian_cosyvoice_musetalk.yaml
- **ä¼˜åŠ¿**:
  - è‡ªå®šä¹‰åŒ»ç”Ÿå½¢è±¡
  - æ¥å…¥åŒ»ç–—çŸ¥è¯†åº“
  - é«˜äº²å’ŒåŠ›äº¤äº’
- **æ³¨æ„**: éœ€äººå·¥å®¡æ ¸ï¼Œä¸å¯å®Œå…¨æ›¿ä»£åŒ»ç”Ÿ

### 4. ä¼ä¸šå†…ç½‘åŠ©æ‰‹
- **é…ç½®**: chat_with_minicpm.yaml
- **ä¼˜åŠ¿**:
  - å®Œå…¨ç§æœ‰åŒ–éƒ¨ç½²
  - æ¥å…¥ä¼ä¸šçŸ¥è¯†åº“
  - æ•°æ®ä¸å‡ºç½‘
- **é€‚ç”¨**: å¤§å‹ä¼ä¸šã€æ”¿åºœæœºå…³

### 5. ç›´æ’­/å±•è§ˆæ•°å­—äºº
- **é…ç½®**: chat_with_lam.yaml
- **ä¼˜åŠ¿**:
  - è¶…å†™å®3Dæ•ˆæœ
  - æ”¯æŒé«˜å¹¶å‘ï¼ˆ5è·¯+ï¼‰
  - å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œé™ä½æˆæœ¬
- **åº”ç”¨**: å±•ä¼šã€ç›´æ’­å¸¦è´§

### 6. ä¸ªäººAIä¼´ä¾£
- **é…ç½®**: chat_with_openai_compatible_edge_tts.yaml
- **ä¼˜åŠ¿**:
  - æ— éœ€API Keyï¼ˆEdge TTSå…è´¹ï¼‰
  - é…ç½®ç®€å•
  - æˆæœ¬ä½
- **é€‚ç”¨**: ä¸ªäººç”¨æˆ·ã€å°å›¢é˜Ÿ

---

## ğŸ“Š æŠ€æœ¯äº®ç‚¹ä¸åˆ›æ–°

### 1. æ¨¡å—åŒ–æ¶æ„
- **Handleræ’æ‹”è®¾è®¡**: å„æ¨¡å—å®Œå…¨è§£è€¦ï¼Œå¯ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²
- **é…ç½®é©±åŠ¨**: æ— éœ€ä¿®æ”¹ä»£ç ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶ç»„åˆåŠŸèƒ½
- **æ˜“äºæ‰©å±•**: æ–°å¢åŠŸèƒ½åªéœ€å®ç°Handleræ¥å£

### 2. å¤šç§éƒ¨ç½²æ¨¡å¼
- **å®Œå…¨æœ¬åœ°åŒ–**: MiniCPM-oç«¯åˆ°ç«¯æ¨ç†ï¼Œæ•°æ®å®Œå…¨ç§æœ‰
- **äº‘è¾¹ååŒ**: å…³é”®æ¨¡å—æœ¬åœ°ï¼ŒLLM/TTSä½¿ç”¨API
- **çº¯äº‘ç«¯**: ä»…VAD/ASRæœ¬åœ°ï¼Œé€‚åˆå¤šè·¯å¹¶å‘

### 3. å®æ—¶æ€§ä¼˜åŒ–
- **æµå¼å¤„ç†**: LLMæµå¼è¾“å‡ºã€TTSæµå¼åˆæˆ
- **ä½å»¶è¿Ÿæ¨¡å¼**: LiteAvatarå¿«é€Ÿæ¨¡å¼
- **å¹¶å‘æ§åˆ¶**: èµ„æºæ± ç®¡ç†ï¼Œé˜²æ­¢OOM

### 4. å¤šæ•°å­—äººæ”¯æŒ
- **2Då†™å®**: LiteAvatarï¼ˆ100+å®˜æ–¹å½¢è±¡ï¼‰
- **3Dè¶…å†™å®**: LAMï¼ˆGaussian Splattingï¼‰
- **è‡ªå®šä¹‰**: MuseTalkï¼ˆæ”¯æŒä»»æ„åº•ç‰ˆè§†é¢‘ï¼‰

### 5. ä¸°å¯Œçš„é›†æˆ
- **LLM**: OpenAIå…¼å®¹APIã€MiniCPM-oã€Qwen-Omniã€Dify
- **TTS**: CosyVoiceï¼ˆæœ¬åœ°/APIï¼‰ã€Edge TTS
- **å‰åç«¯åˆ†ç¦»**: ç‹¬ç«‹å‰ç«¯ä»“åº“ï¼Œæ˜“äºå®šåˆ¶

---

## ğŸ”® æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡ï¼ˆå·²è§„åˆ’ï¼‰
- [ ] æ¥å…¥Live2Dæ•°å­—äºº
- [ ] æ¥å…¥3Dæ•°å­—äººï¼ˆåŸºäºUnreal Engineï¼‰
- [ ] å®Œå–„æ–‡æ¡£ä¸è§†é¢‘æ•™ç¨‹
- [ ] å¤šè¯­è¨€å‰ç«¯ï¼ˆè‹±è¯­ã€æ—¥è¯­ç­‰ï¼‰

### ä¸­æœŸç›®æ ‡
- [ ] æ”¯æŒæ›´å¤šLLMåç«¯ï¼ˆClaude, GPT-4oç­‰ï¼‰
- [ ] æƒ…ç»ªè¯†åˆ«ä¸è¡¨æƒ…è”åŠ¨
- [ ] æ‰‹åŠ¿è¯†åˆ«ä¸AvataråŠ¨ä½œç”Ÿæˆ
- [ ] å¤šäººå¯¹è¯æ”¯æŒ
- [ ] ä¼šè¯å½•åˆ¶ä¸å›æ”¾

### é•¿æœŸæ„¿æ™¯
- [ ] ç«¯åˆ°ç«¯ä¼˜åŒ–ï¼Œå»¶è¿Ÿé™è‡³1ç§’å†…
- [ ] æ”¯æŒVR/ARè®¾å¤‡
- [ ] å…ƒå®‡å®™é›†æˆ
- [ ] AIè‡ªä¸»ç”Ÿæˆæ•°å­—äººå½¢è±¡
- [ ] å®æ—¶åœºæ™¯äº’åŠ¨

---

## ğŸ¤ ç¤¾åŒºä¸è´¡çŒ®

### ç¤¾åŒºèµ„æº
- **GitHub**: https://github.com/HumanAIGC-Engineering/OpenAvatarChat
- **HuggingFace Demo**: https://huggingface.co/spaces/HumanAIGC-Engineering-Team/open-avatar-chat
- **ModelScope Demo**: https://www.modelscope.cn/studios/HumanAIGC-Engineering/open-avatar-chat
- **Bilibiliæ•™ç¨‹**: https://www.bilibili.com/video/BV1sv8QzLEC2
- **å¾®ä¿¡äº¤æµç¾¤**: è§READMEäºŒç»´ç 

### è´¡çŒ®æ–¹å¼
1. **æäº¤Issue**: æŠ¥å‘ŠBugæˆ–åŠŸèƒ½å»ºè®®
2. **æäº¤PR**: ä¿®å¤Bugæˆ–æ–°å¢åŠŸèƒ½
3. **åˆ†äº«ç»éªŒ**: åœ¨ç¤¾åŒºåˆ†äº«éƒ¨ç½²ç»éªŒ
4. **åˆ¶ä½œæ•™ç¨‹**: è§†é¢‘æ•™ç¨‹ã€åšå®¢æ–‡ç« 
5. **åˆ›å»ºå½¢è±¡**: åˆ†äº«è‡ªå®šä¹‰æ•°å­—äººå½¢è±¡

### ç¤¾åŒºè´¡çŒ®æ¦œ
- **åå­—é±¼**: Bç«™ä¸€é”®å®‰è£…åŒ…
- **W&H**: å¤¸å…‹ç½‘ç›˜èµ„æºåˆ†äº«
- æ›´å¤šè´¡çŒ®è€…è§READMEè‡´è°¢éƒ¨åˆ†

---

## ğŸ“š å‚è€ƒæ–‡çŒ®ä¸èµ„æº

### æ ¸å¿ƒè®ºæ–‡
1. **LAM**: "LAM: Lightweight Audio-driven Motion for 3D Avatars" (SIGGRAPH 2025)
2. **MuseTalk**: Real-time High-fidelity Talking Head Generation
3. **MiniCPM-o**: Multimodal Omni Model
4. **CosyVoice**: Voice Clone and Generation

### å¼€æºé¡¹ç›®
| é¡¹ç›® | ç”¨é€” | é“¾æ¥ |
|-----|------|-----|
| gradio-webrtc | WebRTCå°è£… | https://github.com/HumanAIGC-Engineering/gradio-webrtc |
| lite-avatar | 2Dæ•°å­—äºº | https://github.com/HumanAIGC/lite-avatar |
| LAM | 3Dæ•°å­—äºº | https://github.com/aigc3d/LAM |
| MuseTalk | 2Dæ•°å­—äºº | https://github.com/TMElyralab/MuseTalk |
| CosyVoice | TTS | https://github.com/FunAudioLLM/CosyVoice |
| MiniCPM-o | å¤šæ¨¡æ€LLM | https://github.com/OpenBMB/MiniCPM-o |
| SileroVAD | VAD | https://github.com/snakers4/silero-vad |

### æ¨¡å‹èµ„æº
- **LiteAvatarå½¢è±¡åº“**: https://modelscope.cn/models/HumanAIGC-Engineering/LiteAvatarGallery
- **MiniCPM-o**: https://huggingface.co/openbmb/MiniCPM-o-2_6
- **Wav2Vec2**: https://huggingface.co/facebook/wav2vec2-base-960h

---

## ğŸ“ æ€»ç»“

### é¡¹ç›®ä¼˜åŠ¿
1. **é«˜åº¦æ¨¡å—åŒ–**: Handlerè®¾è®¡æ€æƒ³ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
2. **çµæ´»éƒ¨ç½²**: æ”¯æŒæœ¬åœ°ã€äº‘ç«¯ã€æ··åˆéƒ¨ç½²
3. **æ€§èƒ½ä¼˜å¼‚**: 2.2ç§’ç«¯åˆ°ç«¯å»¶è¿Ÿï¼Œ30FPSå®æ—¶æ¸²æŸ“
4. **å¼€æºå‹å¥½**: å®Œæ•´æ–‡æ¡£ã€æ´»è·ƒç¤¾åŒºã€æŒç»­æ›´æ–°
5. **ç”Ÿäº§å¯ç”¨**: æ”¯æŒå¤šè·¯å¹¶å‘ã€ä¼šè¯ç®¡ç†ã€èµ„æºæ§åˆ¶

### æŠ€æœ¯ä»·å€¼
- **å­¦ä¹ ä»·å€¼**: æ¶µç›–WebRTCã€æ·±åº¦å­¦ä¹ ã€ç³»ç»Ÿè®¾è®¡ç­‰å¤šä¸ªé¢†åŸŸ
- **ç ”ç©¶ä»·å€¼**: å¯ä½œä¸ºæ•°å­—äººäº¤äº’ç³»ç»Ÿçš„å‚è€ƒå®ç°
- **å•†ä¸šä»·å€¼**: å¯ç›´æ¥ç”¨äºäº§å“å¼€å‘ï¼ŒèŠ‚çœç ”å‘æ—¶é—´

### é€‚ç”¨äººç¾¤
- **å¼€å‘è€…**: å¿«é€Ÿæ­å»ºæ•°å­—äººå¯¹è¯ç³»ç»Ÿ
- **ç ”ç©¶è€…**: æ¢ç´¢å¤šæ¨¡æ€äº¤äº’ç®—æ³•
- **ä¼ä¸š**: éƒ¨ç½²å†…éƒ¨AIåŠ©æ‰‹
- **åˆ›ä¸šè€…**: å¼€å‘æ•°å­—äººåº”ç”¨äº§å“

### æ¨èé…ç½®

| åœºæ™¯ | æ¨èé…ç½® | ç†ç”± |
|-----|---------|------|
| **å¿«é€Ÿä¸Šæ‰‹** | chat_with_openai_compatible_bailian_cosyvoice.yaml | é…ç½®ç®€å•ï¼Œç®—åŠ›éœ€æ±‚ä½ |
| **ç”Ÿäº§éƒ¨ç½²** | chat_with_lam.yaml | æ”¯æŒé«˜å¹¶å‘ï¼Œæ•ˆæœå¥½ |
| **ç§æœ‰åŒ–éœ€æ±‚** | chat_with_minicpm.yaml | å®Œå…¨æœ¬åœ°ï¼Œæ•°æ®å®‰å…¨ |
| **ä½æˆæœ¬è¯•ç”¨** | chat_with_openai_compatible_edge_tts.yaml | æ— éœ€API Key |

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å›¢é˜Ÿå’Œä¸ªäººçš„è´¡çŒ®ï¼š
- **HumanAIGC-Engineering Team**: æ ¸å¿ƒå¼€å‘å›¢é˜Ÿ
- **OpenBMB**: MiniCPM-oæ¨¡å‹
- **FunAudioLLM**: CosyVoiceé¡¹ç›®
- **TMElyralab**: MuseTalké¡¹ç›®
- **aigc3d**: LAMé¡¹ç›®
- **æ‰€æœ‰ç¤¾åŒºè´¡çŒ®è€…**: åé¦ˆã€æµ‹è¯•ã€æ–‡æ¡£å®Œå–„

---

## ğŸ“„ å¼•ç”¨

å¦‚æœæœ¬é¡¹ç›®å¯¹æ‚¨çš„ç ”ç©¶æˆ–å·¥ä½œæœ‰å¸®åŠ©ï¼Œè¯·å¼•ç”¨ï¼š

```bibtex
@software{avatarchat2025,
  author = {Gang Cheng, Tao Chen, Feng Wang, Binchao Huang, Hui Xu, Guanqiao He, Yi Lu, Shengyin Tan},
  title = {OpenAvatarChat},
  year = {2025},
  publisher = {GitHub},
  url = {https://github.com/HumanAIGC-Engineering/OpenAvatarChat}
}
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**ç”Ÿæˆæ—¥æœŸ**: 2025-10-30  
**ç»´æŠ¤è€…**: OpenAvatarChat Community  
**è”ç³»æ–¹å¼**: è§GitHub Issues

---

*æœ¬æ–‡æ¡£æ ¹æ®é¡¹ç›®v0.5.1ç‰ˆæœ¬ç”Ÿæˆï¼Œæ—¨åœ¨æä¾›å…¨é¢çš„æŠ€æœ¯æ€»ç»“å’Œä½¿ç”¨æŒ‡å—ã€‚å¦‚æœ‰ç–æ¼æˆ–æ›´æ–°ï¼Œæ¬¢è¿æäº¤PRå®Œå–„ã€‚*

