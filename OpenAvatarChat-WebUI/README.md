# 🎉 OpenAvatarChat-WebUI 屏幕共享版

基于OpenAvatarChat的现代化前端界面，集成了**智能屏幕共享功能**！

## ✨ 新增功能特性

### 🖥️ 智能屏幕共享
- **跨网络支持**: 基于TURN服务器(8.138.87.249:3478)的可靠屏幕共享
- **质量自适应**: 三档质量预设(移动/桌面/高质量)，自动网络质量调整
- **实时监控**: 连接状态、带宽、延迟、丢包率实时显示
- **现代化UI**: 毛玻璃效果的浮动信息面板

### 🎛️ 丰富控制选项
- **捕获模式**: 整个桌面/应用程序窗口/浏览器标签页
- **音频捕获**: 支持系统音频(桌面端)
- **设置面板**: 可折叠的设置界面
- **统计面板**: 详细的性能统计信息

## 🚀 快速启动

### 方法1: 使用启动脚本(推荐)
```bash
# Windows用户
start-dev.bat
```

### 方法2: 手动启动
```bash
# 安装依赖
npm install
# 或使用pnpm
pnpm install

# 启动开发服务器
npm run dev
# 或使用pnpm
pnpm dev
```

## 🏗️ 项目结构

```
src/
├── components/
│   ├── ActionGroup.vue           # 控制按钮组(已扩展屏幕共享)
│   ├── ScreenShareInfoPanel.vue  # 屏幕共享信息面板
│   └── Iconfont/
│       └── icons/                # 新增屏幕共享图标
├── store/
│   └── screenShareStore.ts       # 屏幕共享状态管理
├── utils/
│   └── screenShareUtils.ts       # 屏幕共享工具函数
└── views/
    └── VideoChat/
        └── index.vue             # 主界面(已集成屏幕共享)
```

## 🎯 使用指南

### 1. 启动后端服务
```bash
# 在主项目目录 (OpenAvatarChat-250916)
.glut\Scripts\python.exe src\demo.py --config config\chat_with_openai_compatible.yaml
```

### 2. 启动前端服务
- 执行 `start-dev.bat` 或手动启动
- 访问 `http://localhost:5173`

### 3. 使用屏幕共享
1. **权限获取**: 首次访问需要摄像头/麦克风权限
2. **开始对话**: 点击"点击开始对话"建立WebRTC连接
3. **屏幕共享**: 点击ActionGroup中的屏幕共享按钮
4. **选择源**: 在浏览器弹窗中选择共享内容
5. **信息面板**: 右上角显示连接状态和控制选项

## ⚙️ 配置说明

### TURN服务器配置
项目已预配置云服务器TURN基础设施：
- **服务器**: 8.138.87.249:3478
- **配置**: 2vCPU / 4GiB
- **功能**: NAT穿透、内网穿透支持

### 质量预设
| 预设 | 分辨率 | 帧率 | 适用场景 |
|------|--------|------|----------|
| 移动优化 | 720p | 8fps | 移动网络、低带宽 |
| 桌面标准 | 1080p | 15fps | 办公网络、推荐 |
| 高质量 | 1080p | 24fps | 高速网络、演示 |

## 🔧 开发说明

### 技术栈
- **Vue 3.5.17** + Composition API
- **TypeScript** + Vite 7.0.1
- **Ant Design Vue 4.2.6**
- **Pinia 3.0.3** 状态管理
- **WebRTC** + TURN支持

### 核心组件
- `ScreenShareInfoPanel`: 现代化信息面板，支持设置和统计
- `ActionGroup`: 扩展的控制按钮组
- `screenShareStore`: 完整的状态管理
- `screenShareUtils`: 工具函数和质量优化

### 开发特性
- 🎨 现代化毛玻璃UI设计
- 📱 响应式移动端适配
- 🔄 自动质量调整算法
- 📊 实时性能监控
- 🛡️ 完整错误处理

## 🌟 界面预览

### 屏幕共享信息面板
- **状态指示**: 实时连接状态和质量显示
- **设置面板**: 质量、捕获模式、音频设置
- **统计面板**: 带宽、延迟、丢包率、服务器信息
- **现代设计**: 毛玻璃效果、动画过渡

### ActionGroup控制栏
- **集成按钮**: 屏幕共享按钮无缝集成
- **状态联动**: 图标根据共享状态自动切换
- **一键操作**: 点击即可开始/停止屏幕共享

## 🚨 注意事项

### 环境要求
- **协议**: 需要HTTPS或localhost环境
- **浏览器**: 支持getDisplayMedia API的现代浏览器
- **网络**: 确保能访问TURN服务器(8.138.87.249:3478)

### 常见问题
1. **屏幕共享无响应**: 检查HTTPS环境和浏览器支持
2. **连接失败**: 确认后端服务已启动，TURN服务器可访问
3. **移动端限制**: 部分功能(系统音频)在移动端不支持

## 🎊 技术亮点

- ✅ **生产就绪**: 基于成功的TURN基础设施
- ✅ **性能优化**: 针对云服务器资源精心调优  
- ✅ **用户友好**: 直观的现代化界面设计
- ✅ **扩展性强**: 模块化架构，易于定制
- ✅ **移动适配**: 完善的响应式设计

---

**🎉 现在就开始体验智能屏幕共享功能吧！**

> 基于OpenAvatarChat v0.5.0架构，充分利用现有TURN基础设施，为你带来企业级屏幕共享体验！
